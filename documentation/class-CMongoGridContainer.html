<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.7.0" />

	<title>Class CMongoGridContainer | MyWrapper Reference</title>

	<script type="text/javascript" src="resources/combined.js?417553483"></script>
	<script type="text/javascript" src="elementlist.js?1387923255"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?1567499433" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Packages</h3>
			<ul>
				<li class="active main"><a href="package-MyWrapper.html">MyWrapper<span></span></a>
						<ul>
				<li class="main"><a href="package-MyWrapper.Entities.html">Entities</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Framework.html">Framework</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Ontology.html">Ontology</a>
						</li>
				<li class="active main"><a href="package-MyWrapper.Persistence.html">Persistence</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Session.html">Session</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Traits.html">Traits</a>
						</li>
				<li class="main"><a href="package-MyWrapper.Wrappers.html">Wrappers</a>
						</li>
							</ul></li>
				<li><a href="package-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-CArrayContainer.html">CArrayContainer</a></li>
				<li><a href="class-CContainer.html">CContainer</a></li>
				<li><a href="class-CDataset.html">CDataset</a></li>
				<li><a href="class-CGraphEdge.html">CGraphEdge</a></li>
				<li><a href="class-CGraphNode.html">CGraphNode</a></li>
				<li><a href="class-CMongoContainer.html">CMongoContainer</a></li>
				<li class="active"><a href="class-CMongoGridContainer.html">CMongoGridContainer</a></li>
				<li><a href="class-CMongoQuery.html">CMongoQuery</a></li>
				<li><a href="class-COntologyEdgeIndex.html">COntologyEdgeIndex</a></li>
				<li><a href="class-COntologyNodeIndex.html">COntologyNodeIndex</a></li>
				<li><a href="class-CPersistentObject.html">CPersistentObject</a></li>
				<li><a href="class-CPersistentUnitObject.html">CPersistentUnitObject</a></li>
				<li><a href="class-CQuery.html">CQuery</a></li>
				<li><a href="class-CQueryStatement.html">CQueryStatement</a></li>
				<li><a href="class-CRelatedUnitObject.html">CRelatedUnitObject</a></li>
			</ul>





			<h3>Functions</h3>
			<ul>
				<li><a href="function-Neo4jAutoload.html">Neo4jAutoload</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="package-MyWrapper.Persistence.html" title="Summary of MyWrapper\Persistence"><span>Package</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class CMongoGridContainer</h1>


	<div class="description">
	
<p>Mongo persistent file store.</p>

<p>This class extends its CMongoContainer ancestor to implement a file
store based on MongoGridFS containers.</p>

	</div>

	<dl class="tree">
		<dd style="padding-left:0px">
			<a href="class-CObject.html"><span>CObject</span></a>
			
			
			
		</dd>
		<dd style="padding-left:30px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CContainer.html"><span>CContainer</span></a>
			
			
			
		</dd>
		<dd style="padding-left:60px">
			<img src="resources/inherit.png" alt="Extended by" />
			<a href="class-CMongoContainer.html"><span>CMongoContainer</span></a>
			
			
			
		</dd>
		<dd style="padding-left:90px">
			<img src="resources/inherit.png" alt="Extended by" />
<b><span>CMongoGridContainer</span></b>			
			
			
		</dd>
	</dl>








	<div class="info">
		
		
		
		<b>Package:</b> <a href="package-MyWrapper.html">MyWrapper</a>\<a href="package-MyWrapper.Persistence.html">Persistence</a><br />

				<b>Author:</b>
				Milko A. Škofič &lt;<a
href="mailto:m.skofic&#64;cgiar.org">m.skofic&#64;<!---->cgiar.org</a>&gt;<br />
		<b>Located at</b> <a href="source-class-CMongoGridContainer.html#29" title="Go to source code">CMongoGridContainer.php</a><br />
	</div>


	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="Container" id="_Container">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Container">#</a>
		<code><a href="source-class-CMongoGridContainer.html#54" title="Go to source code">Container</a>( <span>mixed <var>$theValue</var> = <span class="php-keyword1">NULL</span></span>, <span>boolean <var>$getOld</var> = <span class="php-keyword1">FALSE</span> </span> )</code>

		<div class="description short">
			
<p>Manage persistent container.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Manage persistent container.</p>

<p>We CMongoContainer::Container() overload this method to ensure that
the provided container is a MongoGridFS object.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theValue</var></dt>
					<dd><code>mixed</code><br> Persistent container or operation.</dd>
					<dt><var>$getOld</var></dt>
					<dd><code>boolean</code><br> TRUE get old value.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br />
				</div>


				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::_Commit()</a></code></code> <br />
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::_PrepareCommit()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CMongoContainer.html#_">CMongoContainer::Container</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="Commit" id="_Commit">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_Commit">#</a>
		<code><a href="source-class-CMongoGridContainer.html#102" title="Go to source code">Commit</a>( <span>reference <var>&amp; $theObject</var></span>, <span>mixed <var>$theIdentifier</var> = <span class="php-keyword1">NULL</span></span>, <span>bitfield <var>$theModifiers</var> = kFLAG_PERSIST_INSERT </span> )</code>

		<div class="description short">
			
<p>Commit provided object.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Commit provided object.</p>

<p>We CMongoContainer::Commit() overload this method to handle
committing files as opposed to documents. We handle the provided parameters as
follows:</p>

<ul>
	<li><b>$theObject</b>: This parameter represents the file to be stored:
		<ul>
			<li><i>SplFileInfo</i>: In this case the parameter is interpreted as a file
			path, it will be resolved with the <i>getRealPath()</i> method.</li>

			<li><i>other</i>: In all other cases the parameter is interpreted as the file
			contents provided as a binary string.</li>
		</ul>
	</li>

	<li><b>$theIdentifier</b>: If provided, this parameter is interpreted as the
	file's metadata and will be enclosed in an array labeled <i>metadata</i>.</li>

	<li><b>$theModifiers</b>: This parameter is initialised to kFLAG_PERSIST_INSERT kFLAG_PERSIST_INSERT, since this is the default and only
	operation possible.</li>
</ul>

<p>The method will return the object's key within the container or raise an
exception if the operation was not successful.</p>

<p>The only reason to overload this method is to write this documentation and
set the default modifier, there is no functional difference between this method
and its CMongoContainer::Commit() inherited version.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theObject</var></dt>
					<dd><code>reference</code><br>&amp;$theObject Object to commit.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>mixed</code><br> Object identifier.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>bitfield</code><br> Commit modifiers.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br />
				</div>


				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_INSERT kFLAG_STATE_ENCODED<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::_PrepareCommit()</a></code></code> <br />
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::_Commit()</a></code></code> <br />
						<code><code><a href="class-CContainer.html#_">CContainer::_FinishCommit()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CContainer.html#_">CContainer::Commit</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_Commit" id="__Commit">

		<td class="attributes"><code>
			 protected 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__Commit">#</a>
		<code><a href="source-class-CMongoGridContainer.html#165" title="Go to source code">_Commit</a>( <span>reference <var>&amp; $theObject</var></span>, <span>reference <var>&amp; $theIdentifier</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<p>Commit provided object.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Commit provided object.</p>

<p>We implement this method to handle MongoGridFS object stores, this method
will store the object in the current container.</p>

<p>This particular container type only supports creating new records, that is,
files are added to the grid and cannot be modified. Also, files can be added
either by path or by content, depending on the provided object parameter.</p>

<p>The parameters accepted by this method are:</p>

<ul>
	<li><b>&amp;$theObject</b>: This parameter holds the file to be added:
		<ul>
			<li><i>SplFileInfo</i>: In this case the parameter is interpreted as a file
			path, it will be resolved with the <i>getRealPath()</i> method.</li>

			<li><i>other</i>: In all other cases the parameter is interpreted as the file
			contents provided as a binary string.</li>
		</ul>
	</li>

	<li><b>$theIdentifier</b>: This parameter is interpreted as the file's metadata
	and has been normalised before this method.</li>

	<li><b>$theModifiers</b>: We ignore this parameter.</li>
</ul>

<p>The</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theObject</var></dt>
					<dd><code>reference</code><br>&amp;$theObject Object to commit.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>reference</code><br>&amp;$theIdentifier Object identifier.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit modifiers.</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br />
				</div>


				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::Container()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::Commit()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CMongoContainer.html#_">CMongoContainer::_Commit</a></code></div>

		</div>
		</div></td>
	</tr>
	<tr data-order="_PrepareCommit" id="__PrepareCommit">

		<td class="attributes"><code>
			 protected 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#__PrepareCommit">#</a>
		<code><a href="source-class-CMongoGridContainer.html#235" title="Go to source code">_PrepareCommit</a>( <span>reference <var>&amp; $theObject</var></span>, <span>reference <var>&amp; $theIdentifier</var></span>, <span>reference <var>&amp; $theModifiers</var></span> )</code>

		<div class="description short">
			
<p>Prepare before a _Commit() commit.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Prepare before a _Commit() commit.</p>

<p>We CMongoContainer::_PrepareCommit() override this method to reset
the parameters that are not relevant to the operation, that is, we set the
identifier to an empty array if <i>NULL</i> or enclose it in a <i>metadata</i>
array if not and force the modifiers to kFLAG_PERSIST_INSERT
kFLAG_PERSIST_INSERT.</p>

<p>We also check if the native container is of the correct type.</p>

<p>Note that we do not call the parent method, but the grandpa method
explicitly.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$theObject</var></dt>
					<dd><code>reference</code><br>&amp;$theObject Object or data.</dd>
					<dt><var>$theIdentifier</var></dt>
					<dd><code>reference</code><br>&amp;$theIdentifier Object identifier.</dd>
					<dt><var>$theModifiers</var></dt>
					<dd><code>reference</code><br>&amp;$theModifiers Commit modifiers.</dd>
				</dl></div>


				<h4>Throws</h4>
				<div class="list">
					<code>{@link</code><br>CException CException}<br />
				</div>

				<h4>See</h4>
				<div class="list">
						kFLAG_PERSIST_INSERT kFLAG_STATE_ENCODED<br />
						kERROR_OPTION_MISSING kERROR_INVALID_PARAMETER kERROR_INVALID_STATE<br />
				</div>
				<h4>Uses</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::Container()</a></code></code> <br />
				</div>
				<h4>Used by</h4>
				<div class="list">
						<code><code><a href="class-CMongoGridContainer.html#_">CMongoGridContainer::Commit()</a></code></code> <br />
				</div>

				<h4>Overrides</h4>
				<div class="list"><code><a href="class-CMongoContainer.html#_">CMongoContainer::_PrepareCommit</a></code></div>

		</div>
		</div></td>
	</tr>
	</table>

	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CMongoContainer.html#methods">CMongoContainer</a></caption>
	<tr>
		<td><code>
			<a href="class-CMongoContainer.html#_">Database()</a>, 
			<a href="class-CMongoContainer.html#_">UnserialiseData()</a>, 
			<a href="class-CMongoContainer.html#_">_Delete()</a>, 
			<a href="class-CMongoContainer.html#_">_Load()</a>, 
			<a href="class-CMongoContainer.html#_">_PrepareLoad()</a>, 
			<a href="class-CMongoContainer.html#_">__toString()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CContainer.html#methods">CContainer</a></caption>
	<tr>
		<td><code>
			<a href="class-CContainer.html#_">Delete()</a>, 
			<a href="class-CContainer.html#_">Load()</a>, 
			<a href="class-CContainer.html#_">Reference()</a>, 
			<a href="class-CContainer.html#_">UnserialiseObject()</a>, 
			<a href="class-CContainer.html#_">_Container()</a>, 
			<a href="class-CContainer.html#_">_FinishCommit()</a>, 
			<a href="class-CContainer.html#_">_FinishDelete()</a>, 
			<a href="class-CContainer.html#_">_FinishLoad()</a>, 
			<a href="class-CContainer.html#_">_PrepareDelete()</a>, 
			<a href="class-CContainer.html#_">__construct()</a>
		</code></td>
	</tr>
	</table>
	<table class="summary inherited">
	<caption>Methods inherited from <a href="class-CObject.html#methods">CObject</a></caption>
	<tr>
		<td><code>
			<a href="class-CObject.html#_">DurationString()</a>, 
			<a href="class-CObject.html#_">JsonDecode()</a>, 
			<a href="class-CObject.html#_">JsonEncode()</a>, 
			<a href="class-CObject.html#_">ManageMember()</a>, 
			<a href="class-CObject.html#_">StringNormalise()</a>
		</code></td>
	</tr>
	</table>







	<table class="summary inherited">
	<caption>Properties inherited from <a href="class-CContainer.html#properties">CContainer</a></caption>
	<tr>
		<td><code>
			<a href="class-CContainer.html#$mContainer"><var>$mContainer</var></a>
		</code></td>
	</tr>
	</table>


</div>

	<div id="footer">
		MyWrapper Reference API documentation generated by <a href="http://apigen.org">ApiGen 2.7.0</a>
	</div>
</div>
</div>
</body>
</html>
