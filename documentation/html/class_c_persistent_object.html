<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Wrapper: CPersistentObject Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="Skofic.icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Wrapper
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">MyWrapperReference</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_c_persistent_object.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">CPersistentObject Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for CPersistentObject:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_c_persistent_object.png" usemap="#CPersistentObject_map" alt=""/>
  <map id="CPersistentObject_map" name="CPersistentObject_map">
<area href="class_c_status_object.html" alt="CStatusObject" shape="rect" coords="72,56,206,80"/>
<area href="class_c_array_object.html" alt="CArrayObject" shape="rect" coords="72,0,206,24"/>
<area href="class_c_mongo_d_b_ref.html" alt="CMongoDBRef" shape="rect" coords="0,168,134,192"/>
<area href="class_c_persistent_unit_object.html" alt="CPersistentUnitObject" shape="rect" coords="144,168,278,192"/>
<area href="class_c_dataset.html" alt="CDataset" shape="rect" coords="72,224,206,248"/>
<area href="class_c_entity.html" alt="CEntity" shape="rect" coords="216,224,350,248"/>
<area href="class_c_user.html" alt="CUser" shape="rect" coords="216,280,350,304"/>
</map>
 </div></div>

<p><a href="class_c_persistent_object-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a10d0ce97598da33eaf305eb43e418255"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a10d0ce97598da33eaf305eb43e418255">__construct</a> ($theContainer=NULL, $theIdentifier=NULL)</td></tr>
<tr class="memitem:ad076a9a2baf73bba0784deb135a3b7b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#ad076a9a2baf73bba0784deb135a3b7b7">Commit</a> ($theContainer=NULL, $theIdentifier=NULL)</td></tr>
<tr class="memitem:a37c897b534e88477a06ec60b89d84450"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a37c897b534e88477a06ec60b89d84450">Uncommit</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6520a7bcecf3f39fd61ec6d08f736e77"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">_IsCommitted</a> ($theState=NULL)</td></tr>
<tr class="memitem:a3f3f673d9b838de05c39789345c06231"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a3f3f673d9b838de05c39789345c06231">_CreateObject</a> (&amp;$theContent)</td></tr>
<tr class="memitem:a18f8a2910cfbabecf52dac660bf95c12"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">_StoreObject</a> (&amp;$theContainer, &amp;$theIdentifier)</td></tr>
<tr class="memitem:afd733566c87bf239a3232bdf3aa982bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">_FindObject</a> (&amp;$theContainer, &amp;$theIdentifier)</td></tr>
<tr class="memitem:a1d9808bf48214b1b34b3e646ad2e981e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a1d9808bf48214b1b34b3e646ad2e981e">_PrepareFind</a> (&amp;$theContainer, &amp;$theIdentifier)</td></tr>
<tr class="memitem:aa97c7f242d7014b6944d3379261477ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#aa97c7f242d7014b6944d3379261477ec">_PrepareStore</a> (&amp;$theContainer, &amp;$theIdentifier)</td></tr>
<tr class="memitem:a437ad5584c8ee53ae8bc455e36355d4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_persistent_object.html#a437ad5584c8ee53ae8bc455e36355d4e">_FinishStore</a> (&amp;$theContainer, &amp;$theIdentifier)</td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a10d0ce97598da33eaf305eb43e418255"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a10d0ce97598da33eaf305eb43e418255">CPersistentObject::__construct</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>theContainer</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>theIdentifier</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Instantiate class.</p>
<p>The constructor can be used to instantiate an empty object, instantiate an object from some content, or load an object from a container.</p>
<p>The parameters to this method are:</p>
<ul>
<li>
<b>$theContainer</b>: This parameter represents either the contents of the object, if the next parameter is missing, or the persistent store in which the object resides. If missing, we assume we want to create an empty object. <ul>
<li>
<em>NULL</em>: In this case it is assumed you want to instantiate an empty object, the next parameter will be ignored. </li>
<li>
<em>ArrayObject</em>: In this case we assume the parameter represents either: <ul>
<li>
the object <em>contents</em>: if the next parameter is missing, or </li>
<li>
the object <em>container</em>: if the next parameter is provided. </li>
</ul>
</li>
<li>
<em>Other</em>: Any other type should be handled by derived classes, or passed here where we raise an <a class="el" href="">exception</a>. </li>
</ul>
</li>
<li>
<b>$theIdentifier</b>: This parameter represents the key or query that will be used to locate the object in the container provided in the first parameter. <ul>
<li>
<em>NULL</em>: This indicates that the first parameter represents the object <em>contents</em>. </li>
<li>
<em>other</em>: Any other type is considered as a key or query used to locate the object in the container provided in the first parameter. </li>
</ul>
</li>
</ul>
<p>Depending on the results of this method we set the <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> as follows:</p>
<ul>
<li>
<em>Empty object</em>: By omitting the first parameter we indicate that we want to start from scratch, the object will not have its <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> set. </li>
<li>
<em>Filled object</em>: In this case we provide in the <em>$theContainer</em> parameter the object's <em>contents</em>. In this case we do not consider the object as persistent, so the object will not have its <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> set. </li>
<li>
<em>Selected object</em>: In this case we search the <em>$theContainer</em> with the provided <em>$theIdentifier</em> as a key or query, and if: <ul>
<li>
<em>Found</em>: We set the <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> on. </li>
<li>
<em>Not found</em>: We instantiate an empty object and ignore the <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a>. </li>
</ul>
</li>
</ul>
<p>The <a class="el" href="class_c_status_object.html#a8429102e4f52f7558649b64f4e673a69">inited</a> <a class="el" href="">flag</a> is the responsibility of derived classes, here we do not manage it.</p>
<p>In derived classes you should not overload this method, instead, you should overload the protected interface:</p>
<ul>
<li>
<em><a class="el" href="class_c_persistent_object.html#a1d9808bf48214b1b34b3e646ad2e981e">_PrepareFind</a>()</em>: This method can be used to initialise or normalise the container and identifier; this method will only be called if the identifier was provided, in other words, when loading the object from a container. In this class this method will ensure that the container is an ArrayObject. </li>
<li>
<em><a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">_FindObject</a>()</em>: This method will perform the actual retrieval of the object from the container, it is only called if the identifier was provided. </li>
<li>
<em><a class="el" href="class_c_persistent_object.html#a3f3f673d9b838de05c39789345c06231">_CreateObject</a>()</em>: This method will instantiate the contents of the object, that is: with the container, if the identifier was not provided; or with the result of the object <a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">retrieval</a>. </li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$theContainer</td><td>Persistent container. </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>public</p>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_c_exception.html">CException</a></td><td><a class="el" href="class_c_persistent_object.html#a1d9808bf48214b1b34b3e646ad2e981e">_PrepareFind()</a>  <a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">_FindObject()</a>  <a class="el" href="class_c_persistent_object.html#a3f3f673d9b838de05c39789345c06231">_CreateObject()</a>  <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">_IsCommitted()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="class_c_entity.html#ac087e5b3d14357f452ab531db5f6a7e9">CEntity</a>, <a class="el" href="class_c_mongo_d_b_ref.html#a13de8db465efc2ac47c38cfc36bce4b9">CMongoDBRef</a>, and <a class="el" href="class_c_user.html#a728ac6fd50a9f9e18dfe2fa547d5c798">CUser</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3f3f673d9b838de05c39789345c06231"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a3f3f673d9b838de05c39789345c06231">CPersistentObject::_CreateObject</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContent</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create object.</p>
<p>The duty of this method is to instantiate an object with the provided data.</p>
<p>This class expects the content to be either <em>NULL</em>, meaning we are instantiating an empty object, an <em>array</em> or an <em>ArrayObject</em>, in which case we are instantiating an object from the provided data; other types should either be handled by derived classes or raise an <a class="el" href="">exception</a>.</p>
<p>The method returns a boolean where <em>TRUE</em> indicates that the object was instantiated with data, and <em>FALSE</em> indicating that the object is empty. This will be used to set the object <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a>.</p>
<p>The parameter is provided as a reference.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContent</td><td>Object data content.</td></tr>
  </table>
  </dd>
</dl>
<p>protected </p>
<dl class="section return"><dt>Returns:</dt><dd>boolean</dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_c_exception.html">CException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd>kERROR_UNSUPPORTED </dd></dl>

</div>
</div>
<a class="anchor" id="afd733566c87bf239a3232bdf3aa982bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">CPersistentObject::_FindObject</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theIdentifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find object.</p>
<p>The duty of this method is to locate the object identified by <em>$theIdentifier</em> in the container <em>$theContainer</em> and return its contents or <em>NULL</em> if not found.</p>
<p>The method should expect both parameters to have been previously checked: in this class, the container must be an <em>ArrayObject</em> representing either the actual container, or a <a class="el" href="class_c_container.html">CContainer</a> derived instance which will take care of locating the object within its managed native container.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContainer</td><td>Object container. </td></tr>
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>protected </p>
<dl class="section return"><dt>Returns:</dt><dd>mixed </dd></dl>

</div>
</div>
<a class="anchor" id="a437ad5584c8ee53ae8bc455e36355d4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a437ad5584c8ee53ae8bc455e36355d4e">CPersistentObject::_FinishStore</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theIdentifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Normalise after a store.</p>
<p>This method will be called after the <a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">store</a> operation, its duty is to restore the object and the parameters to the state they were before the <a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">commit</a> operation.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContainer</td><td>Object container. </td></tr>
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>protected </p>

</div>
</div>
<a class="anchor" id="a6520a7bcecf3f39fd61ec6d08f736e77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">CPersistentObject::_IsCommitted</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>theState</em> = <code>NULL</code></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Manage committed status.</p>
<p>This method can be used to get or set the object's committed state.</p>
<p>A committed object is one that has either been loaded from a container or committed to a container. This state indicates that the object is persistent. This state, combined with the <a class="el" href="class_c_status_object.html#a19c4ac94dfe26476e780d77b99744d43">dirty</a> status, can determine if an object needs to be committed in a container or not.</p>
<p>The method features a single parameter:</p>
<ul>
<li>
<em>NULL</em>: The method will return <em>TRUE</em> if the object is committed, or <em>FALSE</em> if the object is not committed. </li>
<li>
<em>TRUE</em>: The method will set the object to committed. </li>
<li>
<em>FALSE</em>: The method will reset the object's committed state. </li>
</ul>
<p>In all cases the method will return the state <em>after</em> it was eventually modified.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$theState</td><td>TRUE, FALSE or NULL.</td></tr>
  </table>
  </dd>
</dl>
<p>protected </p>
<dl class="section return"><dt>Returns:</dt><dd>boolean</dd></dl>
<p><a class="el" href="class_c_status_object.html#a3e37d72a6462d93bf7ff567f07f78093">_ManageBitField()</a></p>
<dl class="section see"><dt>See also:</dt><dd>kFLAG_STATE_COMMITTED </dd></dl>

</div>
</div>
<a class="anchor" id="a1d9808bf48214b1b34b3e646ad2e981e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a1d9808bf48214b1b34b3e646ad2e981e">CPersistentObject::_PrepareFind</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theIdentifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Normalise parameters of a find.</p>
<p>The duty of this method is to ensure that the parameters provided to a <a class="el" href="class_c_persistent_object.html#afd733566c87bf239a3232bdf3aa982bc">find</a> operation are valid.</p>
<p>The method should first check if the provided container is of the correct type, then it should ensure that the identifier is valid.</p>
<p>We know that the identifier cannot be missing, since this method is only called if the identifier was provided. We should check that the provided container is of the correct type. In derived classes you should first handle your custom types, then let the parent method handle other types.</p>
<p>Any errors should raise an exception.</p>
<p>In this class we only support <em>ArrayObject</em> containers and the identifier is not expected to be <em>NULL</em>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContainer</td><td>Object container. </td></tr>
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>protected</p>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_c_exception.html">CException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd>kERROR_OPTION_MISSING kERROR_UNSUPPORTED </dd></dl>

<p>Reimplemented in <a class="el" href="class_c_persistent_unit_object.html#a68e0b572ee840cd8d8db4e1bb499c89f">CPersistentUnitObject</a>.</p>

</div>
</div>
<a class="anchor" id="aa97c7f242d7014b6944d3379261477ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#aa97c7f242d7014b6944d3379261477ec">CPersistentObject::_PrepareStore</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theIdentifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Normalise before a store.</p>
<p>This method will be called before the <a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">store</a> operation, its duty is to prepare the object and the parameters for the <a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">commit</a>.</p>
<p>In this class we ensure that the container is either an ArrayObject or a <a class="el" href="class_c_container.html">CContainer</a> derived instance, any other type will raise an exception. In derived classes you should handle your custom containers or delegate to the parent.</p>
<p>In this class we do not check the identifier.</p>
<p>Any errors should raise an exception.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContainer</td><td>Object container. </td></tr>
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>protected</p>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_c_exception.html">CException</a></td><td><a class="el" href="class_c_status_object.html#a8429102e4f52f7558649b64f4e673a69">_IsInited()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also:</dt><dd>kERROR_INVALID_PARAMETER kERROR_OPTION_MISSING kERROR_UNSUPPORTED </dd></dl>

<p>Reimplemented in <a class="el" href="class_c_entity.html#a991f328223b1b00b37e9028b16f7a7c8">CEntity</a>, <a class="el" href="class_c_persistent_unit_object.html#a42b46ccb307aa8038e5ed78819a23aa6">CPersistentUnitObject</a>, and <a class="el" href="class_c_user.html#a031f5d13fe837cf445006ee21023bf3e">CUser</a>.</p>

</div>
</div>
<a class="anchor" id="a18f8a2910cfbabecf52dac660bf95c12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">CPersistentObject::_StoreObject</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>theIdentifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Store object in container.</p>
<p>The duty of this method is to store the current object in the provided container with a key provided by the identifier.</p>
<p>This class can store objects in ArrayObject containers and in <a class="el" href="class_c_container.html">CContainer</a> derived instances, in the latter case the storing will be delegated to the container.</p>
<p>The method should expect both parameters to have been previously <a class="el" href="class_c_persistent_object.html#aa97c7f242d7014b6944d3379261477ec">checked</a>, its main duty is to perform the actual storage. In derived classes you should intercept custom containers, or call the parent method.</p>
<p><em>Note: the duty of this method is to store only the array part of the object, properties should be ignored.</em></p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theContainer</td><td>Object container. </td></tr>
    <tr><td class="paramtype">reference</td><td class="paramname">&amp;$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>protected </p>
<dl class="section return"><dt>Returns:</dt><dd>mixed </dd></dl>

</div>
</div>
<a class="anchor" id="ad076a9a2baf73bba0784deb135a3b7b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#ad076a9a2baf73bba0784deb135a3b7b7">CPersistentObject::Commit</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>theContainer</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>theIdentifier</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit the object into a container.</p>
<p>This method should be used to commit the object to a container, the method accepts two parameters:</p>
<ul>
<li>
<b>$theContainer</b>: This parameter represents the <em>container</em> in which the object is to be stored. It may either be a <a class="el" href="class_c_container.html">CContainer</a> derived instance or an <em>ArrayObject</em> which will be considered the persistent object store. This parameter may also be omitted, in which case derived classes will have to implement a default collection. </li>
<li>
<b>$theIdentifier</b>: This parameter represents the unique identifier of the object within the container provided in the first parameter. </li>
</ul>
<p>The method will only operate if either the <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> is <em>not</em> set, or the <a class="el" href="class_c_status_object.html#a19c4ac94dfe26476e780d77b99744d43">dirty</a> <a class="el" href="">flag</a> is <em>set</em>, if none of these two conditions are satisfied, the method will just exit.</p>
<p>The method will by default <em>set</em> the <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> <a class="el" href="">flag</a> and <em>reset</em> the <a class="el" href="class_c_status_object.html#a19c4ac94dfe26476e780d77b99744d43">dirty</a> <a class="el" href="">flag</a>.</p>
<p>This method should raise an exception if any error occurs.</p>
<p>The method should return the unique identifier of the object or <em>NULL</em> if the operation was not performed.</p>
<p>In derived classes you should not overload this method, instead, you should overload the protected interface:</p>
<ul>
<li>
<em><a class="el" href="class_c_persistent_object.html#aa97c7f242d7014b6944d3379261477ec">_PrepareStore</a>()</em>: This method can be used to initialise or check both the container and the identifier. </li>
<li>
<em><a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">_StoreObject</a>()</em>: This method will perform the actual commit. </li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$theContainer</td><td>Persistent container. </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$theIdentifier</td><td>Object identifier.</td></tr>
  </table>
  </dd>
</dl>
<p>public </p>
<dl class="section return"><dt>Returns:</dt><dd>mixed</dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_c_exception.html">CException</a></td><td><a class="el" href="class_c_status_object.html#a19c4ac94dfe26476e780d77b99744d43">_IsDirty()</a>  <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">_IsCommitted()</a>  _CheckContainer()  _CheckIdentifier()  <a class="el" href="class_c_persistent_object.html#a18f8a2910cfbabecf52dac660bf95c12">_StoreObject()</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a37c897b534e88477a06ec60b89d84450"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_persistent_object.html#a37c897b534e88477a06ec60b89d84450">CPersistentObject::Uncommit</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">committed</a> status.</p>
<p>This method can be used to reset the object's <a class="el" href="">committed</a> <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">status</a>, this may be necessary when copying an object from one container to the other, since the object will be <a class="el" href="class_c_persistent_object.html#ad076a9a2baf73bba0784deb135a3b7b7">committed</a> only if the <a class="el" href="">committed</a> <a class="el" href="class_c_persistent_object.html#a6520a7bcecf3f39fd61ec6d08f736e77">status</a> is not set, or if the <a class="el" href="">dirsty</a> <a class="el" href="class_c_status_object.html#a19c4ac94dfe26476e780d77b99744d43">status</a> is set.</p>
<p>public </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Library/WebServer/Library/wrapper/classes/CPersistentObject.php</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_c_persistent_object.html">CPersistentObject</a>      </li>

    <li class="footer">Generated on Thu Mar 15 2012 20:18:45 for Wrapper by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
