<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>My Wrapper Reference » \CRelatedUnitObject</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">My Wrapper Reference</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/MyWrapper.html"><i class="icon-folder-open"></i> MyWrapper</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#Preferred" title="Preferred :: Manage used reference."><span class="description">Manage used reference.</span><pre>Preferred()</pre></a></li>
<li class="method public "><a href="#Relate" title="Relate :: Manage object references."><span class="description">Manage object references.</span><pre>Relate()</pre></a></li>
<li class="method public "><a href="#Used" title="Used :: Manage used reference."><span class="description">Manage used reference.</span><pre>Used()</pre></a></li>
<li class="method public "><a href="#Valid" title="Valid :: Manage valid reference."><span class="description">Manage valid reference.</span><pre>Valid()</pre></a></li>
<li class="method public "><a href="#ValidObject" title="ValidObject :: Return a valid object."><span class="description">Return a valid object.</span><pre>ValidObject()</pre></a></li>
<li class="nav-header protected">» Protected</li>
<li class="method protected "><a href="#_PrepareCommit" title="_PrepareCommit :: Normalise before a store."><span class="description">Normalise before a store.</span><pre>_PrepareCommit()</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCRelatedUnitObject" id="\CRelatedUnitObject"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/.html"></a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/CRelatedUnitObject.html">CRelatedUnitObject</a>
</li>
</ul>
<div href="../classes/CRelatedUnitObject.html" class="element class">
<p class="short_description">Related unit objects ancestor.</p>
<div class="details">
<p class="long_description"><p>This class extends its <a href="CPersistentUnitObject">parent</a> to add two properties: a
list of related objects and a pointer to a valid object.</p>

<p>This object introduces the concept of object reference, that is, a structure that can be
used to refer to other objects. The <a href="Relate()">Relate</a> method can be used to manage
a list of object references in the <a href="kTAG_REFS">kTAG_REFS</a> offset, this list
can take two forms: it can be an array of object references, or an array of
predicate/object pairs that can constitute a graph.</p>

<p>This class also features a <a href="kTAG_VALID">property</a> that can be
<a href="Valid()">used</a> to refer to a valid object: in other words, objects do not get
deleted, they simply point to the <a href="Valid()">valid</a> object, that way one can
implement a system that maintains referential integrity.</p>

<p>To supplement the last property, this class implements a static
<a href="ValidObject()">method</a> that can be used to return the valid object, objects that
are obsolete or deleted may <a href="Valid()">point</a> to the valid object, this method will
follow the links until it reaches an object that is valid.</p>

<p>We declare the class abstract because none of the <a href="CPersistentUnitObject">parent</a>
abstract methods are here explicitly implemented.</p></p>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/MyWrapper.Persistence.html">MyWrapper</a></td>
</tr>
<tr>
<th>subpackage</th>
<td>Persistence</td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="Preferred" id="Preferred"></a><div class="element clickable method public Preferred" data-toggle="collapse" data-target=".Preferred .collapse">
<h2>Manage used reference.</h2>
<pre>Preferred(mixed $theValue, boolean $getOld) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to handle the object's preferred reference, it uses the
standard accessor <a href="CAttribute::ManageOffset()">method</a> to manage the
<a href="kTAG_PREFERRED">offset</a>.</p>

<p>Objects may become obsolete, but still represent valid entries: in this case we use
this attribute to point to the preferred object.</p>

<p>For a more in-depth reference of this method, please consult the
<a href="CAttribute::ManageOffset()">CAttribute::ManageOffset</a> method, in which the
second parameter will be the constant <a href="kTAG_PREFERRED">kTAG_PREFERRED</a>.</p>

<p>In this class we feed the value to the
<a href="CPersistentUnitObject::NormaliseRelatedObject()">NormaliseRelatedObject</a> method
that will take care of handling object references.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\CAttribute::ManageOffset()</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_PREFERRED</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Value.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="Relate" id="Relate"></a><div class="element clickable method public Relate" data-toggle="collapse" data-target=".Relate .collapse">
<h2>Manage object references.</h2>
<pre>Relate(mixed $theObject, mixed $thePredicate, mixed $theOperation, boolean $getOld) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to manage relationships between the current object and other
objects, it is represented as a list of subject/predicate/object relationships in
which the subject is the current object, and the list of predicate/object pairs will
be stored in the <a href="kTAG_REFS">kTAG_REFS</a> offset.</p>

<p>The method accepts the following parameters:</p>

<ul>
<li><b>$theObject</b>: Relation object, it should either be the relation object
    itself, or an object reference to the relation's object. Before the current
    object is <a href="Commit()">committed</a>, all elements provided as instances derived
    from the <a href="CRelatedUnitObject">CRelatedUnitObject</a> class will also be
    <a href="_ParseReferences()">committed</a> and converted to object references.
    This parameter is passed through a protected
    <a href="CPersistentUnitObject::NormaliseRelatedObject()">method</a> that derived
    classes can use to validate and normalise relation objects.
<li><b>$thePredicate</b>: Relation predicate, this parameter represents the kind or
    predicate of the relation, depending on whether it is provided or not, each
    element of the relations list will take the following form:
 <ul>
    <li><i>NULL</i>: If the predicate is omitted, the element of the relation will
        only have the object parameter.
    <li><i>FALSE</i> The element will be an array composed of one element,
        <a href="kTAG_DATA">kTAG_DATA</a>, which will hold the firat parameter.
    <li><i>other</i> The element will be an array composed of two elements:
     <ul>
        <li><i><a href="kTAG_KIND">kTAG_KIND</a></i>: This offset represents the reference
            predicate, it will hold the value of this parameter.
        <li><i><a href="kTAG_DATA">kTAG_DATA</a></i>: This offset represents the reference
            object, it will hold the value of the first parameter.
     </ul>
        This parameter is passed through a protected
    <a href="CPersistentUnitObject::NormaliseRelatedPredicate()">method</a> that derived
    classes can use to validate and normalise relation predicates.
 </ul>
<li><b>$theOperation</b>: The operation to perform:
 <ul>
    <li><i>NULL</i>: Return the element matched by the previous parameters.
    <li><i>FALSE</i>: Delete the element matched by the previous parameters and
        return it.
    <li><i>other</i>: Any other value means that we want to add to the list the
        element provided in the previous parameters, either appending it if there
        was no matching element, or by replacing a matching element. The method will
        return either the replaced element or the new one.
 </ul>
<li><b>$getOld</b>: Determines what the method will return when deleting or
    replacing:
 <ul>
    <li><i>TRUE</i>: Return the deleted or replaced element.
    <li><i>FALSE</i>: Return the replacing element or <i>NULL</i> when deleting.
 </ul>
</ul></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\CPersistentUnitObject::NormaliseRelatedObject()</td>
</tr>
<tr>
<th>uses</th>
<td>\CPersistentUnitObject::NormaliseRelatedPredicate()</td>
</tr>
<tr>
<th>uses</th>
<td>\CAttribute::ManageObjectList()</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_REFS</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theObject</h4>
<code>mixed</code><p>Reference object.</p></div>
<div class="subelement argument">
<h4>$thePredicate</h4>
<code>mixed</code><p>Reference predicate.</p></div>
<div class="subelement argument">
<h4>$theOperation</h4>
<code>mixed</code><p>Operation.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="Used" id="Used"></a><div class="element clickable method public Used" data-toggle="collapse" data-target=".Used .collapse">
<h2>Manage used reference.</h2>
<pre>Used(mixed $theValue, boolean $getOld) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to handle the object's default reference, it uses the
standard accessor <a href="CAttribute::ManageOffset()">method</a> to manage the
<a href="kTAG_DEFAULT">offset</a>.</p>

<p>In enumerations, for instance, there may be several entries that refer to a single
entity: this tag should be used to point to the instance that represents the used or
default choice.</p>

<p>For a more in-depth reference of this method, please consult the
<a href="CAttribute::ManageOffset()">CAttribute::ManageOffset</a> method, in which the
second parameter will be the constant <a href="kTAG_DEFAULT">kTAG_DEFAULT</a>.</p>

<p>In this class we feed the value to the
<a href="CPersistentUnitObject::NormaliseRelatedObject()">NormaliseRelatedObject</a> method
that will take care of handling object references.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\CAttribute::ManageOffset()</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_DEFAULT</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Value.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="Valid" id="Valid"></a><div class="element clickable method public Valid" data-toggle="collapse" data-target=".Valid .collapse">
<h2>Manage valid reference.</h2>
<pre>Valid(mixed $theValue, boolean $getOld) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to handle the valid object's
<a href="kTAG_LID">identifier</a>, it uses the standard accessor
<a href="CAttribute::ManageOffset()">method</a> to manage the <a href="kTAG_VALID">offset</a>.</p>

<p>Objects derived from this class should be persistent, in other words, it is not an
option to delete such objects: by creating a new object and referencing it from the
old one, we maintain the original reference and point to the valid object.</p>

<p>For a more in-depth reference of this method, please consult the
<a href="CAttribute::ManageOffset()">CAttribute::ManageOffset</a> method, in which the
second parameter will be the constant <a href="kTAG_VALID">kTAG_VALID</a>.</p>

<p>In this class we feed the value to the
<a href="CPersistentUnitObject::NormaliseRelatedObject()">NormaliseRelatedObject</a> method
that will take care of handling object references.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\CAttribute::ManageOffset()</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_VALID</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Value.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="ValidObject" id="ValidObject"></a><div class="element clickable method public ValidObject" data-toggle="collapse" data-target=".ValidObject .collapse">
<h2>Return a valid object.</h2>
<pre>ValidObject(mixed $theContainer, mixed $theIdentifier, \bitfield $theModifiers) : \CGraphNodeObject</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to instantiate a valid object, this means that if we provide
the identifier of an expired or obsolete object that has a reference to a
<a href="Valid()">valid</a> object, this method will return the valid one.</p>

<p>The method expects the same parameters as the <a href="NewObject()">NewObject</a> static
method. If the <a href="Valid()">valid</a> chain is recursive, the method will raise an
exception.</p>

<p>The method will return the first object that does not have a <a href="Valid()">valid</a>
<a href="kTAG_VALID">reference</a>, or <i>NULL</i> if the object was not found.</p></p>
<table class="table table-bordered"><tr>
<th>static</th>
<td></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code>mixed</code><p>Persistent container.</p></div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>mixed</code><p>Object identifier.</p></div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\bitfield</code><p>Load modifiers.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\CGraphNodeObject</code></div>
</div></div>
</div>
<a name="_PrepareCommit" id="_PrepareCommit"></a><div class="element clickable method protected _PrepareCommit" data-toggle="collapse" data-target="._PrepareCommit .collapse">
<h2>Normalise before a store.</h2>
<pre>_PrepareCommit(\reference $theContainer, \reference $theIdentifier, \reference $theModifiers) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CPersistentUnitObject::_PrepareCommit()">overload</a> this method to
<a href="Commit()">commit</a> eventual object references stored as instances. We scan the
<a href="Relate()">relations</a> and the <a href="Valid()">valid</a> references and process all
elements that derive from this class.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>protected</td>
</tr>
<tr>
<th>see</th>
<td>\kERROR_OPTION_MISSING</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code>\reference</code><p>&$theContainer Object container.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>\reference</code><p>&$theIdentifier Object identifier.</p>
</div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\reference</code><p>&$theModifiers Commit modifiers.</p>
</div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code>\{@link</code></th>
<td>CException CException}</td>
</tr></table>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a6</a> and<br>
            generated on 2012-07-11T12:27:24+02:00.<br></footer></div>
</div>
</body>
</html>
