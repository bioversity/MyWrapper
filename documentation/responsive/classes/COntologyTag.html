<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>My Wrapper Reference » \COntologyTag</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">My Wrapper Reference</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/MyWrapper.html"><i class="icon-folder-open"></i> MyWrapper</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#Code" title="Code :: Get code."><span class="description">Get code.</span><pre>Code()</pre></a></li>
<li class="method public "><a href="#HashIndex" title="HashIndex :: Hash index."><span class="description">Hash index.</span><pre>HashIndex()</pre></a></li>
<li class="method public "><a href="#NS" title="NS :: Manage term namespace."><span class="description">Manage term namespace.</span><pre>NS()</pre></a></li>
<li class="method public "><a href="#Path" title="Path :: Get path."><span class="description">Get path.</span><pre>Path()</pre></a></li>
<li class="method public "><a href="#RefCount" title="RefCount :: Manage references count."><span class="description">Manage references count.</span><pre>RefCount()</pre></a></li>
<li class="method public "><a href="#Term" title="Term :: Manage terms."><span class="description">Manage terms.</span><pre>Term()</pre></a></li>
<li class="nav-header protected">» Protected</li>
<li class="method protected "><a href="#_Commit" title="_Commit :: Store object in container."><span class="description">Store object in container.</span><pre>_Commit()</pre></a></li>
<li class="method protected "><a href="#_Inited" title="_Inited :: Return {@link _IsInited() initialised} status."><span class="description">Return {@link _IsInited() initialised} status.</span><pre>_Inited()</pre></a></li>
<li class="method protected "><a href="#_NewSequence" title="_NewSequence :: Get new sequence."><span class="description">Get new sequence.</span><pre>_NewSequence()</pre></a></li>
<li class="method protected "><a href="#_PrepareCommit" title="_PrepareCommit :: Normalise before a store."><span class="description">Normalise before a store.</span><pre>_PrepareCommit()</pre></a></li>
<li class="method protected "><a href="#_index" title="_index :: Return the object's unique index."><span class="description">Return the object's unique index.</span><pre>_index()</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCOntologyTag" id="\COntologyTag"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/.html"></a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/COntologyTag.html">COntologyTag</a>
</li>
</ul>
<div href="../classes/COntologyTag.html" class="element class">
<p class="short_description">Ontology tag.</p>
<div class="details">
<p class="long_description"><p>A data element tagged by an instance of the <a href="COntologyTerm">COntologyTerm</a> class
will have all its metadata stored in that term, but there are cases in which one term is
not enough to describe the full metadata of a data element: for instance, a trait may be
measured using different methods and workflows, and this data may also be measured in
different units. For this reason this class extends the term
<a href="COntologyTermObject">base</a> class to handle this case.</p>

<p>Instances of this class contain a list of ontology <a href="COntologyTerm">terms</a> whose
elements are related between each other by predicates, which are also
<a href="COntologyTerm">terms</a>, this <a href="kTAG_TERM">attribute</a></p>

<p>This path or chain of <a href="COntologyTerm">terms</a> represents the unique identifier of
this class instances and the tags with which data elements can be described.</p>

<p>The path root is a <a href="COntologyTerm">term</a> whose <a href="COntologyNode::Kind()">kind</a>
must be <a href="kTYPE_TRAIT">kTYPE_TRAIT</a> which represents <i>what</b> the data element is
and the path leaf is a <a href="COntologyTerm">term</a> whose
<a href="COntologyNode::Kind()">kind</a> must be <a href="kTYPE_MEASURE">kTYPE_MEASURE</a> which
represents the <b>type</b> or <b>scale</b> of the data; all the
<a href="COntologyTerm">terms</a> found between these two describe <b>how</b> the data was
measured or obtained. This path or chain represents the <i>descriptors</i> of data in
this library and the container in which these objects are stored represents the data
dictionary.</p>

<p>No two objects may exist with the same <a href="Path()">path</a>.</p>

<p>All instances of this class are uniquely <a href="GID()">identified</a> by a combination of two
elements:</p>

<ul>
<li><i><a href="NS()">Namespace</a></i>: There is one instance of this class which represents
    the default namespace of all objects derived from this class, its
    <a href="GID()">identifier</a> is a '@' character (which is forbidden in other related
    term classes).
<li><i><a href="Code()">Code</a></i>: The aforementioned namespace contains an integer field
    which represents a sequence counter which will be used as the object's
    <a href="Code()">code</a>.
</ul>

<p>The class features the following properties:</p>

<ul>
<li><i><a href="kTAG_PATH">kTAG_PATH</a></i>: This <a href="Path()">attribute</a> holds the list of
    <a href="COntologyTerm">term</a> <a href="COntologyTerm::GID()">identifiers</a> representing the
    tag path, the attribute is a string formed by the concatenation of all the
    <a href="COntologyTerm">term</a> <a href="COntologyTerm::GID()">identifiers</a> structured as
    follows: <i>TERM/PREDICATE/TERM/PREDICATE/.../TERM</i> where all items are
    <a href="COntologyTerm">term</a> <a href="COntologyTerm::GID()">identifiers</a>. This property
    represents the object's unique identifier, no two records can have this same value.
<li><i><a href="kTAG_TERM">kTAG_TERM</a></i>: This <a href="Term()">attribute</a> holds the list of
    <a href="COntologyTerm">terms</a> featured in the <a href="Path()">path</a> as an array of
    <a href="COntologyTerm">term</a> <a href="kTAG_LID">identifiers</a> in which odd elements
    represent the subjects and objects of the relationships and the even elements the
    relationship predicates.
<li><i><a href="kTAG_UID">kTAG_UID</a></i>: This attribute holds the hashed value of the
    <a href="Path()">path</a>: it will be used to detect duplicate records.
<li><i><a href="kTAG_REF_COUNT">kTAG_REF_COUNT</a></i>: This <a href="RefCount()">attribute</a>
    holds the count of data instances that refer to the current tag, or the number of
    data instances tagged by the current path. This attribute is required and is
    initialised to 0.
</ul></p>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/MyWrapper.Ontology.html">MyWrapper</a></td>
</tr>
<tr>
<th>subpackage</th>
<td>Ontology</td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="Code" id="Code"></a><div class="element clickable method public Code" data-toggle="collapse" data-target=".Code .collapse">
<h2>Get code.</h2>
<pre>Code(mixed $theValue, boolean $getOld) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="COntologyTerm::Code()">overload</a> this method to make this method read-only,
the code is generated programmatically.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_CODE</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Value.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="HashIndex" id="HashIndex"></a><div class="element clickable method public HashIndex" data-toggle="collapse" data-target=".HashIndex .collapse">
<h2>Hash index.</h2>
<pre>HashIndex(string $theValue) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CPersistentUnitObject::HashIndex()">overload</a> this method to disable index
hashing.</p></p>
<table class="table table-bordered"><tr>
<th>static</th>
<td></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>string</code><p>Value to hash.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="NS" id="NS"></a><div class="element clickable method public NS" data-toggle="collapse" data-target=".NS .collapse">
<h2>Manage term namespace.</h2>
<pre>NS(mixed $theValue, boolean $getOld) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="COntologyTerm::NS()">overload</a> this method to force a default namespace
with a '@' code, this namespace element is created programmatically.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_NAMESPACE</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Value.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="Path" id="Path"></a><div class="element clickable method public Path" data-toggle="collapse" data-target=".Path .collapse">
<h2>Get path.</h2>
<pre>Path() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This <a href="kTAG_PATH">attribute</a> holds the list of <a href="COntologyTerm">term</a>
<a href="COntologyTerm::GID()">identifiers</a> representing the tag path, each element is
separated by a <a href="kTOKEN_INDEX_SEPARATOR">kTOKEN_INDEX_SEPARATOR</a> token.</p>

<p>This value represents the unique identifier of the object and it is set automatically
by the <a href="Term()">term</a> method, for this reason this method is read-only.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_PATH</td>
</tr>
</table>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a name="RefCount" id="RefCount"></a><div class="element clickable method public RefCount" data-toggle="collapse" data-target=".RefCount .collapse">
<h2>Manage references count.</h2>
<pre>RefCount() : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to retrieve the object's <a href="kTAG_REF_COUNT">references</a>
count, or number of data instances tagged by this object.</p>

<p>This method is read-only, because this value is set programmatically.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_REF_COUNT</td>
</tr>
</table>
<h3>Returns</h3>
<div class="subelement response"><code>integer</code></div>
</div></div>
</div>
<a name="Term" id="Term"></a><div class="element clickable method public Term" data-toggle="collapse" data-target=".Term .collapse">
<h2>Manage terms.</h2>
<pre>Term(mixed $theValue) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method can be used to add <a href="COntologyTerm">term</a> elements of the path, it
accepts a single parameter which represents either the elements to be added or the
operation to be performed:</p>

<ul>
<li><i>NULL</i>: This value indicates that we want to retrieve the whole list.
<li><i>FALSE</i>: This value indicates that we want to delete the whole list.
<li><i>array</i>: The elements of the array will be added to the list by recursing
    this method.
<li><i>other</i>: Any other type will be analysed as follows:
 <ul>
    <li><i><a href="COntologyTerm">COntologyTerm</a></i>: The term's
        <a href="kTAG_GID">identifier</a> will be used.
    <li><i><a href="COntologyEdge">COntologyEdge</a></i>: The edge elements will be
        handled as follows:
     <ul>
        <li><i>The current list is empty</i>: The three terms will make the list.
        <li><i>The current list exists</i>: The method will check if the edge's
            subject matches the last element in the list: if this is the case, the
            method will add the predicate and object terms; if not, it will raise an
            exception.
     </ul>
    <li><i><a href="COntologyEdgeIndex">COntologyEdgeIndex</a></i>: The same treatment as
        for the <a href="COntologyEdge">COntologyEdge</a>.
    <li><i>other</i>: Any other type will be cast to a string and interpreted as the
        <a href="COntologyTerm">term</a>'s <a href="kTAG_GID">identifier</a>.
 </ul>
</ul>

<p>All elements will be appended to the list in the order they were provided, it must be
noted that the class expects this list to be a sequence of term/predicate/term
elements, this method is not responsible for checking this.</p>

<p>The method will prevent modifications if the object is
<a href="_IsCommitted()">committed</a>, because this would change the object's unique
<a href="kTAG_UID">identifier</a>.</p>

<p>The method will return the current full list.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\_CheckReference()</td>
</tr>
<tr>
<th>uses</th>
<td>\CAttribute::ManageArrayOffset()</td>
</tr>
<tr>
<th>see</th>
<td>\kTAG_TERM</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Term or operation.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="_Commit" id="_Commit"></a><div class="element clickable method protected _Commit" data-toggle="collapse" data-target="._Commit .collapse">
<h2>Store object in container.</h2>
<pre>_Commit(\reference $theContainer, \reference $theIdentifier, \reference $theModifiers) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CGraphNode::_Commit()">overload</a> this method to provide the correct
container to the <a href="CGraphNode">parent</a> <a href="CGraphNode::_Commit()">method</a>.</p>

<p>We also overload this method to store the node properties into a Mongo collection
named <a href="kDEFAULT_CNT_NODES">kDEFAULT_CNT_NODES</a>, the record will be indexed by
node ID as a 64 bit integer.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>protected</td>
</tr>
<tr>
<th>uses</th>
<td>\Node()</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code>\reference</code><p>&$theContainer Object container.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>\reference</code><p>&$theIdentifier Object identifier.</p>
</div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\reference</code><p>&$theModifiers Commit modifiers.</p>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="_Inited" id="_Inited"></a><div class="element clickable method protected _Inited" data-toggle="collapse" data-target="._Inited .collapse">
<h2>Return {@link _IsInited() initialised} status.</h2>
<pre>_Inited() : boolean</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="COntologyTerm::_Inited()">overload</a> this method to link the presence of the
<a href="Term()">term</a> <a href="kTAG_TERM">attribute</a> to the
<a href="_IsInited()">initialised</a> <a href="kFLAG_STATE_INITED">status</a> and disable all
other inherited requirements.</p></p>
<table class="table table-bordered">
<tr>
<th>see</th>
<td>\kTAG_TERM</td>
</tr>
<tr>
<th>access</th>
<td>protected</td>
</tr>
</table>
<h3>Returns</h3>
<div class="subelement response"><code>boolean</code></div>
</div></div>
</div>
<a name="_NewSequence" id="_NewSequence"></a><div class="element clickable method protected _NewSequence" data-toggle="collapse" data-target="._NewSequence .collapse">
<h2>Get new sequence.</h2>
<pre>_NewSequence(CMongoContainer $theContainer) : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will return the next sequence number and increment the existing one.
The sequence is stored in a singleton record identified by the
<a href="kTAG_SINGLETON_ID">kTAG_SINGLETON_ID</a> character, this record contains a single
<a href="kTAG_COUNT">attribute</a> which represents the next available sequence number.</p>

<p>When retrieving the sequence, if the main record does not exist, this method will
create one with a first value of 1.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code><a href="../classes/CMongoContainer.html">\CMongoContainer</a></code><p>Object container.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code>\{@link</code></th>
<td>CException CException}</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response"><code>integer</code></div>
</div></div>
</div>
<a name="_PrepareCommit" id="_PrepareCommit"></a><div class="element clickable method protected _PrepareCommit" data-toggle="collapse" data-target="._PrepareCommit .collapse">
<h2>Normalise before a store.</h2>
<pre>_PrepareCommit(\reference $theContainer, \reference $theIdentifier, \reference $theModifiers) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="COntologyTerm::_PrepareCommit()">overload</a> this method to check whether
there is another record with the same <a href="kTAG_UID">unique</a> identifier, in that
case we load the current object with the contents of the found one.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>protected</td>
</tr>
<tr>
<th>uses</th>
<td>\kERROR_OPTION_MISSING</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code>\reference</code><p>&$theContainer Object container.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>\reference</code><p>&$theIdentifier Object identifier.</p>
</div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\reference</code><p>&$theModifiers Commit modifiers.</p>
</div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code>\{@link</code></th>
<td>CException CException}</td>
</tr></table>
</div></div>
</div>
<a name="_index" id="_index"></a><div class="element clickable method protected _index" data-toggle="collapse" data-target="._index .collapse">
<h2>Return the object's unique index.</h2>
<pre>_index() : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>In this class we use the term's <a href="kTAG_CODE">code</a> as the <a href="kTAG_LID">local</a>
identifier.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response"><code>integer</code></div>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a6</a> and<br>
            generated on 2012-07-04T12:20:39+02:00.<br></footer></div>
</div>
</body>
</html>
