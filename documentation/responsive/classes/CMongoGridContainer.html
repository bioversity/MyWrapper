<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>My Wrapper Reference » \CMongoGridContainer</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">My Wrapper Reference</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/MyWrapper.html"><i class="icon-folder-open"></i> MyWrapper</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#Commit" title="Commit :: Commit provided object."><span class="description">Commit provided object.</span><pre>Commit()</pre></a></li>
<li class="method public "><a href="#Container" title="Container :: Manage persistent container."><span class="description">Manage persistent container.</span><pre>Container()</pre></a></li>
<li class="nav-header protected">» Protected</li>
<li class="method protected "><a href="#_Commit" title="_Commit :: Commit provided object."><span class="description">Commit provided object.</span><pre>_Commit()</pre></a></li>
<li class="method protected "><a href="#_PrepareCommit" title="_PrepareCommit :: Prepare before a {@link _Commit() commit}."><span class="description">Prepare before a {@link _Commit() commit}.</span><pre>_PrepareCommit()</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCMongoGridContainer" id="\CMongoGridContainer"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/.html"></a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/CMongoGridContainer.html">CMongoGridContainer</a>
</li>
</ul>
<div href="../classes/CMongoGridContainer.html" class="element class">
<p class="short_description">Mongo persistent file store.</p>
<div class="details">
<p class="long_description"><p>This class extends its <a href="CMongoContainer">ancestor</a> to implement a file store based
on MongoGridFS containers.</p></p>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/MyWrapper.Persistence.html">MyWrapper</a></td>
</tr>
<tr>
<th>subpackage</th>
<td>Persistence</td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="Commit" id="Commit"></a><div class="element clickable method public Commit" data-toggle="collapse" data-target=".Commit .collapse">
<h2>Commit provided object.</h2>
<pre>Commit(\reference $theObject, mixed $theIdentifier, \bitfield $theModifiers) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CMongoContainer::Commit()">overload</a> this method to handle committing files
as opposed to documents. We handle the provided parameters as follows:</p>

<ul>
<li><b>$theObject</b>: This parameter represents the file to be stored:
 <ul>
    <li><i>SplFileInfo</i>: In this case the parameter is interpreted as a file path,
        it will be resolved with the <i>getRealPath()</i> method.
    <li><i>other</i>: In all other cases the parameter is interpreted as the file
        contents provided as a binary string.
 </ul>
<li><b>$theIdentifier</b>: If provided, this parameter is interpreted as the file's
    metadata and will be enclosed in an array labeled <i>metadata</i>.
<li><b>$theModifiers</b>: This parameter is initialised to
    <a href="kFLAG_PERSIST_INSERT">kFLAG_PERSIST_INSERT</a>, since this is the default and
    only operation possible.
</ul>

<p>The method will return the object's key within the container or raise an exception if
the operation was not successful.</p>

<p>The only reason to overload this method is to write this documentation and set the
default modifier, there is no functional difference between this method and its
<a href="CMongoContainer::Commit()">inherited</a> version.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>public</td>
</tr>
<tr>
<th>uses</th>
<td>\_PrepareCommit()</td>
</tr>
<tr>
<th>uses</th>
<td>\_Commit()</td>
</tr>
<tr>
<th>uses</th>
<td>\_FinishCommit()</td>
</tr>
<tr>
<th>see</th>
<td>\kFLAG_PERSIST_INSERT</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theObject</h4>
<code>\reference</code><p>&$theObject Object to commit.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>mixed</code><p>Object identifier.</p></div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\bitfield</code><p>Commit modifiers.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="Container" id="Container"></a><div class="element clickable method public Container" data-toggle="collapse" data-target=".Container .collapse">
<h2>Manage persistent container.</h2>
<pre>Container(mixed $theValue, boolean $getOld) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CMongoContainer::Container()">overload</a> this method to ensure that the
provided container is a MongoGridFS object.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>public</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theValue</h4>
<code>mixed</code><p>Persistent container or operation.</p></div>
<div class="subelement argument">
<h4>$getOld</h4>
<code>boolean</code><p>TRUE get old value.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="_Commit" id="_Commit"></a><div class="element clickable method protected _Commit" data-toggle="collapse" data-target="._Commit .collapse">
<h2>Commit provided object.</h2>
<pre>_Commit(\reference $theObject, \reference $theIdentifier, \reference $theModifiers) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We implement this method to handle MongoGridFS object stores, this method will store
the object in the current container.</p>

<p>This particular container type only supports creating new records, that is, files are
added to the grid and cannot be modified. Also, files can be added either by path or
by content, depending on the provided object parameter.</p>

<p>The parameters accepted by this method are:</p>

<ul>
<li><b>&$theObject</b>: This parameter holds the file to be added:
 <ul>
    <li><i>SplFileInfo</i>: In this case the parameter is interpreted as a file path,
        it will be resolved with the <i>getRealPath()</i> method.
    <li><i>other</i>: In all other cases the parameter is interpreted as the file
        contents provided as a binary string.
 </ul>
<li><b>$theIdentifier</b>: This parameter is interpreted as the file's metadata and
    has been normalised before this method.
<li><b>$theModifiers</b>: We ignore this parameter.
</ul>

<p>The</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>protected</td>
</tr>
<tr>
<th>uses</th>
<td>\Container()</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theObject</h4>
<code>\reference</code><p>&$theObject Object to commit.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>\reference</code><p>&$theIdentifier Object identifier.</p>
</div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\reference</code><p>&$theModifiers Commit modifiers.</p>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a name="_PrepareCommit" id="_PrepareCommit"></a><div class="element clickable method protected _PrepareCommit" data-toggle="collapse" data-target="._PrepareCommit .collapse">
<h2>Prepare before a {@link _Commit() commit}.</h2>
<pre>_PrepareCommit(\reference $theObject, \reference $theIdentifier, \reference $theModifiers) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>We <a href="CMongoContainer::_PrepareCommit()">override</a> this method to reset the
parameters that are not relevant to the operation, that is, we set the identifier to
an empty array if <i>NULL</i> or enclose it in a <i>metadata</i> array if not and
force the modifiers to <a href="kFLAG_PERSIST_INSERT">kFLAG_PERSIST_INSERT</a>.</p>

<p>We also check if the native container is of the correct type.</p>

<p>Note that we do not call the parent method, but the grandpa method explicitly.</p></p>
<table class="table table-bordered">
<tr>
<th>access</th>
<td>protected</td>
</tr>
<tr>
<th>uses</th>
<td>\Container()</td>
</tr>
<tr>
<th>see</th>
<td>\kFLAG_PERSIST_INSERT</td>
</tr>
<tr>
<th>see</th>
<td>\kERROR_OPTION_MISSING</td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theObject</h4>
<code>\reference</code><p>&$theObject Object or data.</p>
</div>
<div class="subelement argument">
<h4>$theIdentifier</h4>
<code>\reference</code><p>&$theIdentifier Object identifier.</p>
</div>
<div class="subelement argument">
<h4>$theModifiers</h4>
<code>\reference</code><p>&$theModifiers Commit modifiers.</p>
</div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code>\{@link</code></th>
<td>CException CException}</td>
</tr></table>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a6</a> and<br>
            generated on 2012-07-06T19:02:15+02:00.<br></footer></div>
</div>
</body>
</html>
