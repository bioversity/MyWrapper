<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>My Wrapper Reference » \CMongoQuery</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">My Wrapper Reference</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/MyWrapper.html"><i class="icon-folder-open"></i> MyWrapper</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#Export" title="Export :: Export query."><span class="description">Export query.</span><pre>Export()</pre></a></li>
<li class="nav-header protected">» Protected</li>
<li class="method protected "><a href="#_ConvertCondition" title="_ConvertCondition :: Convert condition."><span class="description">Convert condition.</span><pre>_ConvertCondition()</pre></a></li>
<li class="method protected "><a href="#_ConvertStatement" title="_ConvertStatement :: Convert statement."><span class="description">Convert statement.</span><pre>_ConvertStatement()</pre></a></li>
<li class="method protected "><a href="#_OrderRange" title="_OrderRange :: Order range elements."><span class="description">Order range elements.</span><pre>_OrderRange()</pre></a></li>
<li class="method protected "><a href="#_ValidateCondition" title="_ValidateCondition :: Validate condition."><span class="description">Validate condition.</span><pre>_ValidateCondition()</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCMongoQuery" id="\CMongoQuery"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/.html"></a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/CMongoQuery.html">CMongoQuery</a>
</li>
</ul>
<div href="../classes/CMongoQuery.html" class="element class">
<p class="short_description">Mongo query.</p>
<div class="details">
<p class="long_description"><p>This class extends its <a href="CQuery">ancestor</a> to implement a public method that will
convert the current object's query into a query suitable to be submitted to a Mongo
database.</p>

<p>This class implements a query that <a href="Export()">exports</a> as a Mongo query.</p></p>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/MyWrapper.Persistence.html">MyWrapper</a></td>
</tr>
<tr>
<th>subpackage</th>
<td>Persistence</td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="Export" id="Export"></a><div class="element clickable method public Export" data-toggle="collapse" data-target=".Export .collapse">
<h2>Export query.</h2>
<pre>Export(<a href="../classes/CMongoContainer.html">\CMongoContainer</a> $theContainer) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>The method will return an array suitable to be provided as a MongoDB query, the method
requires a container that will take care of converting query arguments to native data
types, this container must be an instance of <a href="CMongoContainer">CMongoContainer</a>,
or the method will raise an exception.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>public</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theContainer</h4>
<code><a href="../classes/CMongoContainer.html">\CMongoContainer</a></code><p>Query container.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="http://php.net/manual/en/class.exception.php">\Exception</a></code></th>
<td></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a name="_ConvertCondition" id="_ConvertCondition"></a><div class="element clickable method protected _ConvertCondition" data-toggle="collapse" data-target="._ConvertCondition .collapse">
<h2>Convert condition.</h2>
<pre>_ConvertCondition(\reference $theQuery, <a href="../classes/CMongoContainer.html">\CMongoContainer</a> $theContainer, string $theCondition, array $theStatements) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will convert the statements of the provided condition to Mongo format.</p>

<p>The parameters to this method are:</p>

<ul>
<li><b></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theQuery</h4>
<code>\reference</code><p>&$theQuery Receives converted query.</p>
</div>
<div class="subelement argument">
<h4>$theContainer</h4>
<code><a href="../classes/CMongoContainer.html">\CMongoContainer</a></code><p>Query container.</p></div>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>string</code><p>Boolean condition.</p></div>
<div class="subelement argument">
<h4>$theStatements</h4>
<code>array</code><p>Statements list.</p></div>
</div></div>
</div>
<a name="_ConvertStatement" id="_ConvertStatement"></a><div class="element clickable method protected _ConvertStatement" data-toggle="collapse" data-target="._ConvertStatement .collapse">
<h2>Convert statement.</h2>
<pre>_ConvertStatement(\reference $theQuery, <a href="../classes/CMongoContainer.html">\CMongoContainer</a> $theContainer, string $theCondition, array $theStatement) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will convert the statement to Mongo format.</p>

<p>The parameters to this method are:</p>

<ul>
<li><b></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theQuery</h4>
<code>\reference</code><p>&$theQuery Receives converted statement.</p>
</div>
<div class="subelement argument">
<h4>$theContainer</h4>
<code><a href="../classes/CMongoContainer.html">\CMongoContainer</a></code><p>Query container.</p></div>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>string</code><p>Boolean condition.</p></div>
<div class="subelement argument">
<h4>$theStatement</h4>
<code>array</code><p>Statement.</p></div>
</div></div>
</div>
<a name="_OrderRange" id="_OrderRange"></a><div class="element clickable method protected _OrderRange" data-toggle="collapse" data-target="._OrderRange .collapse">
<h2>Order range elements.</h2>
<pre>_OrderRange(mixed $theRange, CMongoContainer $theContainer, string $theType) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will order the provided range elements, the method accepts an array of
two elements which represent the range bounds and will return an array with the two
provided elements sorted.</p>

<p>The method accepts three parameters:</p>

<ul>
<li><b>$theRange</b>: An array containing two elements representing the range
    bounds.
<li><b>$theContainer</b>: The <a href="CMongoContainer">container</a> on which the query
    will be executed.
<li><b>$theType</b>: The data type of the range elements.
</ul>

<p>The method expects the range elements to be in
<a href="CDataType::SerialiseData()">serialised</a> format, these elements will be
<a href="CContainer::UnserialiseData()">converted</a> by this method which will return
them in sorted order.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theRange</h4>
<code>mixed</code><p>Range elements.</p></div>
<div class="subelement argument">
<h4>$theContainer</h4>
<code><a href="../classes/CMongoContainer.html">\CMongoContainer</a></code><p>Query container.</p></div>
<div class="subelement argument">
<h4>$theType</h4>
<code>string</code><p>Elements data type.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a name="_ValidateCondition" id="_ValidateCondition"></a><div class="element clickable method protected _ValidateCondition" data-toggle="collapse" data-target="._ValidateCondition .collapse">
<h2>Validate condition.</h2>
<pre>_ValidateCondition(string $theCondition, array $theStatements, integer $theLevel) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method expects a condition as its argument, it will check if it is a valid
condition, then it will <a href="_ValidateStatement()">validate</a> all condition
statements.</p>

<p>In this class we handle queries to Mongo databases, so the depth of the query
conditions cannot go beyond 2 levels.</p>

<p>We overload this method to prevent nesting OR conditions.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>string</code><p>Boolean condition.</p></div>
<div class="subelement argument">
<h4>$theStatements</h4>
<code>array</code><p>Statements list.</p></div>
<div class="subelement argument">
<h4>$theLevel</h4>
<code>integer</code><p>[PRIVATE] condition level.</p>
</div>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a6</a> and<br>
            generated on 2012-07-03T16:30:36+02:00.<br></footer></div>
</div>
</body>
</html>
