<!DOCTYPE html><html xmlns:date="http://exslt.org/dates-and-times" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>My Wrapper Reference » \CQuery</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">My Wrapper Reference</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/MyWrapper.html"><i class="icon-folder-open"></i> MyWrapper</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods</li>
<li class="method public "><a href="#AppendStatement" title="AppendStatement :: Append statement."><span class="description">Append statement.</span><pre>AppendStatement()</pre></a></li>
<li class="method public "><a href="#Validate" title="Validate :: Validate query."><span class="description">Validate query.</span><pre>Validate()</pre></a></li>
<li class="method public "><a href="#__construct" title="__construct :: Instantiate class."><span class="description">Instantiate class.</span><pre>__construct()</pre></a></li>
<li class="nav-header protected">» Protected</li>
<li class="method protected "><a href="#_AppendStatement" title="_AppendStatement :: Append statement."><span class="description">Append statement.</span><pre>_AppendStatement()</pre></a></li>
<li class="method protected "><a href="#_ValidateCondition" title="_ValidateCondition :: Validate condition."><span class="description">Validate condition.</span><pre>_ValidateCondition()</pre></a></li>
<li class="method protected "><a href="#_ValidateStatement" title="_ValidateStatement :: Validate statement."><span class="description">Validate statement.</span><pre>_ValidateStatement()</pre></a></li>
</ul>
</div>
<div class="span8">
<a name="%5CCQuery" id="\CQuery"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/.html"></a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/CQuery.html">CQuery</a>
</li>
</ul>
<div href="../classes/CQuery.html" class="element class">
<p class="short_description">Query.</p>
<div class="details">
<p class="long_description"><p>This class implements a query.</p>

<p>The main goal of this class is to provide a common framework and format to exchange data
store queries or filters.</p>

<p>The query is an array structured as follows:</p>

<ul>
<li><i>index</i>: The index of the root element expresses a boolean condition which
    qualifies its content:
 <ul>
    <li><i><a href="kOPERATOR_AND">kOPERATOR_AND</a></i>: AND.
    <li><i><a href="kOPERATOR_NAND">kOPERATOR_NAND</a></i>: Not AND.
    <li><i><a href="kOPERATOR_OR">kOPERATOR_OR</a></i>: OR.
    <li><i><a href="kOPERATOR_NOR">kOPERATOR_NOR</a></i>: Not OR.
 </ul>
    The value of this root element is an array that can be of two types:
 <ul>
    <li><i>Query statement</i>: A query statement defines a filter structured as
        follows:
     <ul>
        <li><i><a href="kAPI_QUERY_SUBJECT">kAPI_QUERY_SUBJECT</a></i>: The subject field. It
            refers to the object element that we are filtering.
        <li><i><a href="kAPI_QUERY_OPERATOR">kAPI_QUERY_OPERATOR</a></i>: The filter operator.
            This element is required and can take the following values:
         <ul>
            <li><i><a href="kOPERATOR_DISABLED">kOPERATOR_DISABLED</a></i>: Disabled, it means
                that the filter is disabled.
            <li><i><a href="kOPERATOR_EQUAL">kOPERATOR_EQUAL</a></i>: Equality (=).
            <li><i><a href="kOPERATOR_EQUAL_NOT">kOPERATOR_EQUAL_NOT</a></i>: Inequality
                (!=), negates the <a href="kOPERATOR_EQUAL">kOPERATOR_EQUAL</a>
                operator.
            <li><i><a href="kOPERATOR_LIKE">kOPERATOR_LIKE</a></i>: Like, it is an accent and
                case insensitive equality filter.
            <li><i><a href="kOPERATOR_LIKE_NOT">kOPERATOR_LIKE_NOT</a></i>: The negation of
                the <a href="kOPERATOR_LIKE">LIKE</a> operator.
            <li><i><a href="kOPERATOR_PREFIX">kOPERATOR_PREFIX</a></i>: Starts with, or prefix
                match.
            <li><i><a href="kOPERATOR_CONTAINS">kOPERATOR_CONTAINS</a></i>: Contains, selects
                all elements that contain the match string.
            <li><i><a href="kOPERATOR_SUFFIX">kOPERATOR_SUFFIX</a></i>: Ends with, or suffix
                match.
            <li><i><a href="kOPERATOR_REGEX">kOPERATOR_REGEX</a></i>: Regular expression.
            <li><i><a href="kOPERATOR_LESS">kOPERATOR_LESS</a></i>: Smaller than (\<).
            <li><i><a href="kOPERATOR_LESS_EQUAL">kOPERATOR_LESS_EQUAL</a></i>: Smaller than
                or equal (\<=).
            <li><i><a href="kOPERATOR_GREAT">kOPERATOR_GREAT</a></i>: Greater than (\>).
            <li><i><a href="kOPERATOR_GREAT_EQUAL">kOPERATOR_GREAT_EQUAL</a></i>: Greater than
                or equal (\>=).
            <li><i><a href="kOPERATOR_IRANGE">kOPERATOR_IRANGE</a></i>: Range inclusive,
                matches \>= value \<=.
            <li><i><a href="kOPERATOR_ERANGE">kOPERATOR_ERANGE</a></i>: Range exclusive,
                matches \> value \<.
            <li><i><a href="kOPERATOR_NULL">kOPERATOR_NULL</a></i>: Is <i>NULL</i> or element
                is missing.
            <li><i><a href="kOPERATOR_NOT_NULL">kOPERATOR_NOT_NULL</a></i>:Not <i>NULL</i> or
                element exists.
            <li><i><a href="kOPERATOR_IN">kOPERATOR_IN</a></i>: In, or belongs to set.
            <li><i><a href="kOPERATOR_NI">kOPERATOR_NI</a></i>: Not in, the negation of
                <a href="kOPERATOR_IN">kOPERATOR_IN</a>.
            <li><i><a href="kOPERATOR_ALL">kOPERATOR_ALL</a></i>: All, or match the full set.
            <li><i><a href="kOPERATOR_NALL">kOPERATOR_NALL</a></i>: Not all, the negation of
                the <a href="kOPERATOR_ALL">kOPERATOR_ALL</a> operator.
            <li><i><a href="kOPERATOR_EX">kOPERATOR_EX</a></i>: Expression, indicates a
                complex expression.
         </ul>
        <li><i><a href="kAPI_QUERY_TYPE">kAPI_QUERY_TYPE</a></i>: The data type of
            the <a href="kAPI_QUERY_DATA">kAPI_QUERY_DATA</a> element:
         <ul>
            <li><i><a href="kTYPE_STRING">kTYPE_STRING</a></i>: String, we assume
                in UTF8 character set.
            <li><i><a href="kTYPE_INT32">kTYPE_INT32</a></i>: 32 bit signed integer.
            <li><i><a href="kTYPE_INT64">kTYPE_INT64</a></i>: 64 bit signed integer.
            <li><i><a href="kTYPE_FLOAT">kTYPE_FLOAT</a></i>: Floating point number.
            <li><i><a href="kTYPE_DATE">kTYPE_DATE</a></i>: A date.
            <li><i><a href="kTYPE_TIME">kTYPE_TIME</a></i>: A date and time.
            <li><i><a href="kTYPE_STAMP">kTYPE_STAMP</a></i>: A native timestamp.
            <li><i><a href="kTYPE_BOOLEAN">kTYPE_BOOLEAN</a></i>: An on/off switch.
            <li><i><a href="kTYPE_BINARY">kTYPE_BINARY</a></i>: A binary string.
            <li><i><a href="kTYPE_ENUM">kTYPE_ENUM</a></i>: An enumerated value.
            <li><i><a href="kTYPE_ENUM_SET">kTYPE_ENUM_SET</a></i>: An enumerated set of
                values.
         </ul>
        <li><i><a href="kAPI_QUERY_DATA">kAPI_QUERY_DATA</a></i>: The statement test data.
     </ul>
    <li><i>Nested query condition</i>: A nested structure as the current one.
 </ul>
</ul></p>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/MyWrapper.Persistence.html">MyWrapper</a></td>
</tr>
<tr>
<th>subpackage</th>
<td>Persistence</td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a name="AppendStatement" id="AppendStatement"></a><div class="element clickable method public AppendStatement" data-toggle="collapse" data-target=".AppendStatement .collapse">
<h2>Append statement.</h2>
<pre>AppendStatement(array $theStatement, string $theCondition) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will append the provided statement to the query, the second parameter
represents the condition.</p>

<p>Appended statements are merged at the condition level: if the condition exists at any
level, the statement is appended to that condition; if the condition does not exist,
it is created. Obviously, <a href="kOPERATOR_AND">AND</a> and <a href="kOPERATOR_NAND">NAND</a>
are treated as equivalent, as well as <a href="kOPERATOR_OR">OR</a> and
<a href="kOPERATOR_NOR">NOR</a>.</p>

<p>If you provide an object derived from <a href="CQuery">CQuery</a> as the statement, the
method will ignore the condition parameter and append the provided query to the
current object.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>public</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theStatement</h4>
<code>array</code><p>Statement.</p></div>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>string</code><p>Statement condition.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="http://php.net/manual/en/class.exception.php">\Exception</a></code></th>
<td></td>
</tr></table>
</div></div>
</div>
<a name="Validate" id="Validate"></a><div class="element clickable method public Validate" data-toggle="collapse" data-target=".Validate .collapse">
<h2>Validate query.</h2>
<pre>Validate() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will check whether the query structure is valid.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>public</td>
</tr></table>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="http://php.net/manual/en/class.exception.php">\Exception</a></code></th>
<td></td>
</tr></table>
</div></div>
</div>
<a name="__construct" id="__construct"></a><div class="element clickable method public __construct" data-toggle="collapse" data-target=".__construct .collapse">
<h2>Instantiate class.</h2>
<pre>__construct(mixed $theQuery) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>If you omit the parameter the method will instantiate an empty query, if you provide
an array or ArrayObject it will assume the structure to be a query and will
instantiate the object with it; any other data type will raise an exception.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>public</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theQuery</h4>
<code>mixed</code><p>Query data.</p></div>
</div></div>
</div>
<a name="_AppendStatement" id="_AppendStatement"></a><div class="element clickable method protected _AppendStatement" data-toggle="collapse" data-target="._AppendStatement .collapse">
<h2>Append statement.</h2>
<pre>_AppendStatement(\reference $theQuery, array $theCondition, string $theStatement) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method will append the provided statement to the current query.</p>

<p>Statements of the same type, <a href="kOPERATOR_AND">AND</a> and
<a href="kOPERATOR_NAND">NAND</a>,  or <a href="kOPERATOR_OR">OR</a> and
<a href="kOPERATOR_NOR">NOR</a>, will be added at the same level. If the top level is an
<a href="kOPERATOR_OR">OR</a> or <a href="kOPERATOR_NOR">NOR</a> and the provided statement is an
<a href="kOPERATOR_AND">AND</a> or <a href="kOPERATOR_NAND">NAND</a>, the latter will be promoted
to the top level.</p>

<p>The parameters to this method are:</p>

<ul>
<li><b></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theQuery</h4>
<code>\reference</code><p>&$theQuery Query.</p>
</div>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>array</code><p>Statement condition.</p></div>
<div class="subelement argument">
<h4>$theStatement</h4>
<code>string</code><p>Statement.</p></div>
</div></div>
</div>
<a name="_ValidateCondition" id="_ValidateCondition"></a><div class="element clickable method protected _ValidateCondition" data-toggle="collapse" data-target="._ValidateCondition .collapse">
<h2>Validate condition.</h2>
<pre>_ValidateCondition(string $theCondition, array $theStatements, integer $theLevel) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method expects a condition as its argument, it will check if it is a valid
condition, then it will <a href="_ValidateStatement()">validate</a> all condition
statements.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theCondition</h4>
<code>string</code><p>Boolean condition.</p></div>
<div class="subelement argument">
<h4>$theStatements</h4>
<code>array</code><p>Statements list.</p></div>
<div class="subelement argument">
<h4>$theLevel</h4>
<code>integer</code><p>[PRIVATE] condition level.</p>
</div>
</div></div>
</div>
<a name="_ValidateStatement" id="_ValidateStatement"></a><div class="element clickable method protected _ValidateStatement" data-toggle="collapse" data-target="._ValidateStatement .collapse">
<h2>Validate statement.</h2>
<pre>_ValidateStatement(array $theStatement, integer $theLevel) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<p class="long_description"><p>This method expects a statement as its argument, it will check if it is a valid
statement and check if all required elements are there.</p></p>
<table class="table table-bordered"><tr>
<th>access</th>
<td>protected</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$theStatement</h4>
<code>array</code><p>Statement.</p></div>
<div class="subelement argument">
<h4>$theLevel</h4>
<code>integer</code><p>[PRIVATE] condition level.</p>
</div>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a6</a> and<br>
            generated on 2012-07-04T12:20:39+02:00.<br></footer></div>
</div>
</body>
</html>
