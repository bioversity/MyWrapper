\hypertarget{class_c_persistent_unit_object}{\section{C\-Persistent\-Unit\-Object Class Reference}
\label{class_c_persistent_unit_object}\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}}
}
Inheritance diagram for C\-Persistent\-Unit\-Object\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.000000cm]{class_c_persistent_unit_object}
\end{center}
\end{figure}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{class_c_persistent_unit_object_a1907cae8109d56e91e675cbcbb299c44}{New\-Object} (\$the\-Container, \$the\-Identifier)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\-\_\-id} ()
\item 
\hyperlink{class_c_persistent_unit_object_a68e0b572ee840cd8d8db4e1bb499c89f}{\-\_\-\-Prepare\-Find} (\&\$the\-Container, \&\$the\-Identifier)
\item 
\hyperlink{class_c_persistent_unit_object_a42b46ccb307aa8038e5ed78819a23aa6}{\-\_\-\-Prepare\-Store} (\&\$the\-Container, \&\$the\-Identifier)
\item 
\hyperlink{class_c_persistent_unit_object_a9a011ae9563597aa97fd5886481171d7}{\-\_\-\-Manage\-Object\-List} (\$the\-Offset, \$the\-Value, \$the\-Operation=N\-U\-L\-L, \$get\-Old=F\-A\-L\-S\-E)
\item 
\hyperlink{class_c_persistent_unit_object_af3280ba46d1570a0864a8b31801e98fb}{\-\_\-\-Object\-Index} (\$the\-Value)
\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!\-\_\-id@{\-\_\-id}}
\index{\-\_\-id@{\-\_\-id}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{\-\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-Persistent\-Unit\-Object\-::\-\_\-id} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}
Return the object's unique identifier.

This method can be used to return a string value that represents the object's unique identifier. When \hyperlink{class_c_persistent_object_ad076a9a2baf73bba0784deb135a3b7b7}{saving} the object for the first time, if this method returns a value, this will be used as the object's \hyperlink{}{I\-D}.

If this method returns {\itshape N\-U\-L\-L\/}, it is assumed that the \hyperlink{class_c_container}{container} will provide a default unique value.

In this class we first check the \hyperlink{}{identifier}, if not found, we let the system choose.

protected \begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Reimplemented in \hyperlink{class_c_entity_ac518d3885e2c6f30051b8c5ec59e50a3}{C\-Entity}.

\hypertarget{class_c_persistent_unit_object_a9a011ae9563597aa97fd5886481171d7}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!\-\_\-\-Manage\-Object\-List@{\-\_\-\-Manage\-Object\-List}}
\index{\-\_\-\-Manage\-Object\-List@{\-\_\-\-Manage\-Object\-List}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{\-\_\-\-Manage\-Object\-List}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-Persistent\-Unit\-Object\-::\-\_\-\-Manage\-Object\-List} (
\begin{DoxyParamCaption}
\item[{\$}]{the\-Offset, }
\item[{\$}]{the\-Value, }
\item[{\$}]{the\-Operation = {\ttfamily NULL}, }
\item[{\$}]{get\-Old = {\ttfamily FALSE}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{class_c_persistent_unit_object_a9a011ae9563597aa97fd5886481171d7}
Manage a list of objects.

This method can be used to manage a list of objects derived from this class, in particular, an array in which each element is either a string representing the \hyperlink{}{identifier} of the object, or the object itself.

Each element of the array is identified either by the value itself, if it is a string representing the object \hyperlink{}{identifier}, or by the \hyperlink{}{identifier} if the element is an object itself.

The array is numerically indexed and this method will ensure it remains an array.

The parameters to this method are\-:


\begin{DoxyItemize}
\item {\bfseries \$the\-Offset}\-: This parameter represents the offset in the current object that holds the list of objects. This value may not be empty. 
\item {\bfseries \$the\-Value}\-: This parameter may represent either the \hyperlink{}{identifier} of an element in the list, if the operation involves retrieving or deleting, or the actual contents if the operation involves adding or replacing into the list. Values provided as instances derived from this class will be converted to the \hyperlink{}{identifier} they hold if the operation involves retrieving or deleting; if these objects do not have this \hyperlink{}{identifier}, the method will attempt to use the result of the \hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\-\_\-id} method; if also this returns a {\itshape N\-U\-L\-L\/} value we shall raise an exception. If you provide an array in this parameter, the method will assume you want to use the elements of the array as keys or values, in that case it will send each element to this method using the same other parameters. 
\item {\bfseries \$the\-Operation}\-: The operation to perform\-: 
\begin{DoxyItemize}
\item {\itshape N\-U\-L\-L\/}\-: Return the element \hyperlink{}{identified} by the second parameter. 
\item {\itshape F\-A\-L\-S\-E\/}\-: Delete the element \hyperlink{}{identified} by the second parameter, if the next parameter evaluates to {\itshape T\-R\-U\-E\/}, the method will return the deleted element if available. 
\item {\itshape other\/}\-: Any other value means that we want to add/replace the element provided in the second parameter. This means that the method will scan all the elements of the array and replace the element matching the \hyperlink{}{identifier}, or append the element if there is no match. 
\end{DoxyItemize}
\item {\bfseries \$get\-Old}\-: Determines what the method will return when deleting elements\-: 
\begin{DoxyItemize}
\item {\itshape T\-R\-U\-E\/}\-: Return the value of the offset {\itshape before\/} it was eventually modified or deleted. 
\item {\itshape F\-A\-L\-S\-E\/}\-: Return the value of the offset {\itshape after\/} it was eventually modified or deleted. 
\end{DoxyItemize}
\end{DoxyItemize}

Since the list managed by this method is a numeric keyed array, it is important that elements of the array have the \hyperlink{}{identifier}, or deleting elements from the list may prove problematic.

In general, objects holding such lists will have all their elements stored as instances derived from this class \hyperlink{class_c_persistent_object_ad076a9a2baf73bba0784deb135a3b7b7}{committed} and converted to a string containing the object \hyperlink{}{identifier}.


\begin{DoxyParams}[1]{Parameters}
string & {\em \$the\-Offset} & Offset. \\
\hline
mixed & {\em \$the\-Value} & Index or value. \\
\hline
mixed & {\em \$the\-Operation} & Operation. \\
\hline
boolean & {\em \$get\-Old} & T\-R\-U\-E get old value.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
mixed 
\end{DoxyReturn}
\hypertarget{class_c_persistent_unit_object_af3280ba46d1570a0864a8b31801e98fb}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!\-\_\-\-Object\-Index@{\-\_\-\-Object\-Index}}
\index{\-\_\-\-Object\-Index@{\-\_\-\-Object\-Index}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{\-\_\-\-Object\-Index}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-Persistent\-Unit\-Object\-::\-\_\-\-Object\-Index} (
\begin{DoxyParamCaption}
\item[{\$}]{the\-Value}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{class_c_persistent_unit_object_af3280ba46d1570a0864a8b31801e98fb}
Return object index.

This method is \hyperlink{class_c_persistent_unit_object_a9a011ae9563597aa97fd5886481171d7}{used} to determine an object index, the method accepts a single parameter that may be\-:


\begin{DoxyItemize}
\item {\itshape \hyperlink{class_c_persistent_unit_object}{C\-Persistent\-Unit\-Object}\/}\-: In this case we interpret the parameter to be an instance of the object for which we want to retrieve the identifier\-: 
\begin{DoxyItemize}
\item {\itshape \hyperlink{}{k\-T\-A\-G\-\_\-\-I\-D\-\_\-\-N\-A\-T\-I\-V\-E}\/}\-: We first check whether the object has that offset and use it is so. 
\item {\itshape \hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\-\_\-id}\/}\-: We then check the result of this method and use it if not {\itshape N\-U\-L\-L\/}. 
\end{DoxyItemize}
\item {\itshape string\/}\-: In this case we interpret the parameter to be the \hyperlink{}{identifier} of an object and cast it to a string. 
\item {\itshape other\/}\-: Any other value will be cast to a string. 
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
mixed & {\em \$the\-Value} & Object or identifier.\\
\hline
\end{DoxyParams}
protected \begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}
\hypertarget{class_c_persistent_unit_object_a68e0b572ee840cd8d8db4e1bb499c89f}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!\-\_\-\-Prepare\-Find@{\-\_\-\-Prepare\-Find}}
\index{\-\_\-\-Prepare\-Find@{\-\_\-\-Prepare\-Find}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{\-\_\-\-Prepare\-Find}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-Persistent\-Unit\-Object\-::\-\_\-\-Prepare\-Find} (
\begin{DoxyParamCaption}
\item[{\&\$}]{the\-Container, }
\item[{\&\$}]{the\-Identifier}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{class_c_persistent_unit_object_a68e0b572ee840cd8d8db4e1bb499c89f}
Normalise parameters of a find.

The duty of this method is to ensure that the parameters provided to a \hyperlink{class_c_persistent_object_afd733566c87bf239a3232bdf3aa982bc}{find} operation are valid.

In this class we ensure that the container is derived from \hyperlink{class_c_container}{C\-Container}.


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Container} & Object container. \\
\hline
reference & {\em \&\$the\-Identifier} & Object identifier.\\
\hline
\end{DoxyParams}
protected


\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{class_c_exception}{C\-Exception}} & \\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
k\-E\-R\-R\-O\-R\-\_\-\-O\-P\-T\-I\-O\-N\-\_\-\-M\-I\-S\-S\-I\-N\-G k\-E\-R\-R\-O\-R\-\_\-\-U\-N\-S\-U\-P\-P\-O\-R\-T\-E\-D 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_c_persistent_object_a1d9808bf48214b1b34b3e646ad2e981e}{C\-Persistent\-Object}.

\hypertarget{class_c_persistent_unit_object_a42b46ccb307aa8038e5ed78819a23aa6}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!\-\_\-\-Prepare\-Store@{\-\_\-\-Prepare\-Store}}
\index{\-\_\-\-Prepare\-Store@{\-\_\-\-Prepare\-Store}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{\-\_\-\-Prepare\-Store}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-Persistent\-Unit\-Object\-::\-\_\-\-Prepare\-Store} (
\begin{DoxyParamCaption}
\item[{\&\$}]{the\-Container, }
\item[{\&\$}]{the\-Identifier}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}\label{class_c_persistent_unit_object_a42b46ccb307aa8038e5ed78819a23aa6}
Normalise before a store.

The duty of this method is to ensure that the parameters provided to the \hyperlink{class_c_persistent_object_a18f8a2910cfbabecf52dac660bf95c12}{store} operation are correct.

In this class we ensure that the container is a Array\-Object or a \hyperlink{class_c_container}{C\-Container} derived instance and we ensure the identifier is filled in the case it was not provided\-:


\begin{DoxyItemize}
\item {\itshape Get \hyperlink{}{k\-T\-A\-G\-\_\-\-I\-D\-\_\-\-N\-A\-T\-I\-V\-E}\/}\-: If the object features the \hyperlink{}{k\-T\-A\-G\-\_\-\-I\-D\-\_\-\-N\-A\-T\-I\-V\-E} offset, it will be preferred. This is necessary, because we don't want the object identifier to change in time. 
\item {\itshape Use the \hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\-:id} method\/}\-: We use the value returned by the \hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{\-\_\-id} protected method, this will be the case when \hyperlink{class_c_persistent_object_ad076a9a2baf73bba0784deb135a3b7b7}{saving} new objects. 
\end{DoxyItemize}

We also handle here the other two default offsets\-:


\begin{DoxyItemize}
\item {\itshape \hyperlink{}{k\-T\-A\-G\-\_\-\-C\-L\-A\-S\-S}\/}\-: We set this offset with the current object's name. Note that we overwrite old values. 
\item {\itshape \hyperlink{}{k\-T\-A\-G\-\_\-\-V\-E\-R\-S\-I\-O\-N}\/}\-: If not set, we initialise this value to zero, if already set, we increment it. 
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
reference & {\em \&\$the\-Container} & Object container. \\
\hline
reference & {\em \&\$the\-Identifier} & Object identifier.\\
\hline
\end{DoxyParams}
protected


\begin{DoxyExceptions}{Exceptions}
{\em \hyperlink{class_c_exception}{C\-Exception}} & \\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
k\-E\-R\-R\-O\-R\-\_\-\-O\-P\-T\-I\-O\-N\-\_\-\-M\-I\-S\-S\-I\-N\-G k\-E\-R\-R\-O\-R\-\_\-\-U\-N\-S\-U\-P\-P\-O\-R\-T\-E\-D 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_c_persistent_object_aa97c7f242d7014b6944d3379261477ec}{C\-Persistent\-Object}.



Reimplemented in \hyperlink{class_c_entity_a991f328223b1b00b37e9028b16f7a7c8}{C\-Entity}, and \hyperlink{class_c_user_a031f5d13fe837cf445006ee21023bf3e}{C\-User}.

\hypertarget{class_c_persistent_unit_object_a1907cae8109d56e91e675cbcbb299c44}{\index{C\-Persistent\-Unit\-Object@{C\-Persistent\-Unit\-Object}!New\-Object@{New\-Object}}
\index{New\-Object@{New\-Object}!CPersistentUnitObject@{C\-Persistent\-Unit\-Object}}
\subsubsection[{New\-Object}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf C\-Persistent\-Unit\-Object\-::\-New\-Object} (
\begin{DoxyParamCaption}
\item[{\$}]{the\-Container, }
\item[{\$}]{the\-Identifier}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}\label{class_c_persistent_unit_object_a1907cae8109d56e91e675cbcbb299c44}
Instantiate object.

This method can be used to instantiate an object from a mixed class data store, it expects the container to be a \hyperlink{class_c_container}{C\-Container} derived instance and the identifier to be the \hyperlink{class_c_persistent_unit_object_ad1ca0920cf0df3c24351402f9afbf34b}{unique} \hyperlink{}{identifier} of the object.

This method takes advantage of the \hyperlink{class_c_persistent_object_ad076a9a2baf73bba0784deb135a3b7b7}{stored} \hyperlink{}{class} name.

The method will return an object, if the identifier matches and the object has its \hyperlink{}{class} name; an array if the identifier matches, but the data doesn't contain a \hyperlink{}{class\} name reference; {\itshape N\-U\-L\-L\/} if the identifier didn't match.  mixed \$the\-Container Persistent container.  mixed \$the\-Identifier Object identifier.  mixed }

The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
/\-Library/\-Web\-Server/\-Library/wrapper/classes/C\-Persistent\-Unit\-Object.\-php\end{DoxyCompactItemize}
