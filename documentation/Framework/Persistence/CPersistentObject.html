<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class CPersistentObject</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> CPersistentObject</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
							<a href="#sec-descendents">Descendents</a>
			|											<a href="#sec-vars">Vars</a>
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
											<a href="#sec-consts">Constants</a>
						
			</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Persistent objects ancestor.</p>
<p class="description"><p>This class is the ancestor of all persistent classes in this library, it implements the  common interfaces that concrete persistent instances will implement to manage persistent  objects.</p><p>This class declares two main operations: <a href="../../Framework/Persistence/CPersistentObject.html#method__construct">loading</a> an object from a  container and <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">storing</a> the object into a container. These operations  consist of a public interface which declares the operation steps and a protected  interface which implements the operation.</p><p>This class recognises two types of persistent object stores:</p><p><ul><li><em>ArrayObjects</em>: These arrays are considered as the object database.</li><li><em><a href="../../Framework/Persistence/CContainer.html">Container</a> derived objects</em>: These will be objects derived
        from the <a href="../../Framework/Persistence/CContainer.html">CContainer</a> class which implement native database stores.</li></ul></p><p>In general, derived classes should overload the protected interface and use the public  one.</p></p>
		<p class="notes">
			Located in <a class="field" href="_classes---CPersistentObject.php.html">/classes/CPersistentObject.php</a> (line <span class="field">57</span>)
		</p>
		
				
		<pre>ArrayObject
   |
   --<a href="../../Framework/Core/CArrayObject.html">CArrayObject</a>
      |
      --<a href="../../Framework/Core/CStatusObject.html">CStatusObject</a>
         |
         --CPersistentObject</pre>
	
			</div>
</div>

	<a name="sec-descendents"></a>
	<div class="info-box">
		<div class="info-box-title">Direct descendents</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
			<span class="disabled">Descendents</span>
			|												<a href="#sec-vars">Vars</a>
								|															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
															<a href="#sec-consts">Constants</a>
							
					</div>
		<div class="info-box-body">
			<table cellpadding="2" cellspacing="0" class="class-table">
				<tr>
					<th class="class-table-header">Class</th>
					<th class="class-table-header">Description</th>
				</tr>
								<tr>
					<td style="padding-right: 2em; white-space: nowrap">
						<img src="../../media/images/Class.png"
								 alt=" class"
								 title=" class"
								 style="vertical-align: center"/>
						<a href="../../Framework/Persistence/CMongoDBRef.html">CMongoDBRef</a>
					</td>
					<td>
											Mongo object reference.
										</td>
				</tr>
								<tr>
					<td style="padding-right: 2em; white-space: nowrap">
						<img src="../../media/images/Class.png"
								 alt=" class"
								 title=" class"
								 style="vertical-align: center"/>
						<a href="../../Framework/Persistence/CPersistentUnitObject.html">CPersistentUnitObject</a>
					</td>
					<td>
											Unit objects ancestor.
										</td>
				</tr>
							</table>
		</div>
	</div>



	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendants</a> |
															<a href="#sec-consts">Constants</a>
							
															<a href="#sec-vars">Vars</a>
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																																																<div class="method-definition">
					<img src="../../media/images/Constructor.png" alt=" "/>
											<span class="method-result">CPersistentObject</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span> = <span class="var-default">NULL</span>], [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span> = <span class="var-default">NULL</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#Commit" title="details" class="method-name">Commit</a>
											([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span> = <span class="var-default">NULL</span>], [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span> = <span class="var-default">NULL</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#Uncommit" title="details" class="method-name">Uncommit</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#_CreateObject" title="details" class="method-name">_CreateObject</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContent</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#_FindObject" title="details" class="method-name">_FindObject</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_FinishStore" title="details" class="method-name">_FinishStore</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">boolean</span>
										<a href="#_IsCommitted" title="details" class="method-name">_IsCommitted</a>
											([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theState</span> = <span class="var-default">NULL</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_PrepareFind" title="details" class="method-name">_PrepareFind</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_PrepareStore" title="details" class="method-name">_PrepareStore</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#_StoreObject" title="details" class="method-name">_StoreObject</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-consts">Constants</a>
							
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
							<h4>Inherited Variables</h4>
				<A NAME='inherited_vars'><!-- --></A>
									<p>Inherited from <span class="classname"><a href="../../Framework/Core/CStatusObject.html">CStatusObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Variable.png" />
							<span class="var-title">
								<span class="var-name"><a href="../../Framework/Core/CStatusObject.html#var$mStatus">CStatusObject::$mStatus</a></span><br>
							</span>
											</blockquote> 
										
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
															<a href="#sec-vars">Vars</a>
														<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="method__construct" id="__construct"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Constructor.png" />
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">159</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Instantiate class.</p>
<p class="description"><p>The constructor can be used to instantiate an empty object, instantiate an object  from some content, or load an object from a container.</p><p>The parameters to this method are:</p><p><ul><li><strong>$theContainer</strong>: This parameter represents either the contents of the
		object, if the next parameter is missing, or the persistent store in which the
		object resides. If missing, we assume we want to create an empty object.
	 <ul><li><em>NULL</em>: In this case it is assumed you want to instantiate an empty
			object, the next parameter will be ignored.</li><li><em>ArrayObject</em>: In this case we assume the parameter represents either:
		 <ul><li>the object <em>contents</em>: if the next parameter is missing, or</li><li>the object <em>container</em>: if the next parameter is provided.</li></ul></li><li><em>Other</em>: Any other type should be handled by derived classes, or passed
			here where we raise an <a href="../../Framework/Definitions/_defines---Errors.inc.php.html#definekERROR_UNSUPPORTED">exception</a>.</li></ul></li><li><strong>$theIdentifier</strong>: This parameter represents the key or query that will be
        used to locate the object in the container provided in the first parameter.
     <ul><li><em>NULL</em>: This indicates that the first parameter represents the object
            <em>contents</em>.</li><li><em>other</em>: Any other type is considered as a key or query used to locate
            the object in the container provided in the first parameter.</li></ul></li></ul></p><p>Depending on the results of this method we set the <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a>  <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> as follows:</p><p><ul><li><em>Empty object</em>: By omitting the first parameter we indicate that we want to
        start from scratch, the object will not have its
        <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> set.</li><li><em>Filled object</em>: In this case we provide in the <em>$theContainer</em>
        parameter the object's <em>contents</em>. In this case we do not consider the
        object as persistent, so the object will not have its
        <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> set.</li><li><em>Selected object</em>: In this case we search the <em>$theContainer</em> with
        the provided <em>$theIdentifier</em> as a key or query, and if:
     <ul><li><em>Found</em>: We set the <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a>
            <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> on.</li><li><em>Not found</em>: We instantiate an empty object and ignore the
            <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a>.</li></ul></li></ul></p><p>The <a href="../../Framework/Core/CStatusObject.html#method_IsInited">inited</a> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_INITED">flag</a> is the responsibility  of derived classes, here we do not manage it.</p><p>In derived classes you should not overload this method, instead, you should overload  the protected interface:</p><p><ul><li><em><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareFind">_PrepareFind</a>()</em>: This method can be used to
        initialise or normalise the container and identifier; this method will only be
        called if the identifier was provided, in other words, when loading the object
        from a container. In this class this method will ensure that the container is
        an ArrayObject.</li><li><em><a href="../../Framework/Persistence/CPersistentObject.html#method_FindObject">_FindObject</a>()</em>: This method will perform the actual
        retrieval of the object from the container, it is only called if the identifier
        was provided.</li><li><em><a href="../../Framework/Persistence/CPersistentObject.html#method_CreateObject">_CreateObject</a>()</em>: This method will instantiate the
        contents of the object, that is: with the container, if the identifier was not
        provided; or with the result of the object <a href="../../Framework/Persistence/CPersistentObject.html#method_FindObject">retrieval</a>.</li></ul></p></p>
	<ul class="tags">
				<li><span class="field">throws:</span> CException</li>
				<li><span class="field">access:</span> public</li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareFind">CPersistentObject::_PrepareFind()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_FindObject">CPersistentObject::_FindObject()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_CreateObject">CPersistentObject::_CreateObject()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">CPersistentObject::_IsCommitted()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">CPersistentObject</span>
		<span class="method-name">
			__construct
		</span>
					([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span> = <span class="var-default">NULL</span>], [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span> = <span class="var-default">NULL</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theContainer</span><span class="var-description">: Persistent container.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Framework/Persistence/CMongoDBRef.html#method__construct">CMongoDBRef::__construct()</a>
								: Instantiate class.
							</li>
					<li>
				<a href="../../Objects/Entities/CEntity.html#method__construct">CEntity::__construct()</a>
								: Instantiate class.
							</li>
					<li>
				<a href="../../Objects/Entities/CUser.html#method__construct">CUser::__construct()</a>
								: Instantiate class.
							</li>
				</ul>
	</div>
<a name="methodCommit" id="Commit"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">Commit</span> (line <span class="line-number">255</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Commit the object into a container.</p>
<p class="description"><p>This method should be used to commit the object to a container, the method accepts  two parameters:</p><p><ul><li><strong>$theContainer</strong>: This parameter represents the <em>container</em> in which
		the object is to be stored. It may either be a <a href="../../Framework/Persistence/CContainer.html">CContainer</a>
        derived instance or an <em>ArrayObject</em> which will be considered the
        persistent object store. This parameter may also be omitted, in which case
        derived classes will have to implement a default collection.</li><li><strong>$theIdentifier</strong>: This parameter represents the unique identifier of the
        object within the container provided in the first parameter.</li></ul></p><p>The method will only operate if either the <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a>  <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> is <em>not</em> set, or the  <a href="../../Framework/Core/CStatusObject.html#method_IsDirty">dirty</a> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_DIRTY">flag</a> is <em>set</em>, if none of  these two conditions are satisfied, the method will just exit.</p><p>The method will by default <em>set</em> the <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a>  <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a> and <em>reset</em> the <a href="../../Framework/Core/CStatusObject.html#method_IsDirty">dirty</a>  <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_DIRTY">flag</a>.</p><p>This method should raise an exception if any error occurs.</p><p>The method should return the unique identifier of the object or <em>NULL</em> if the  operation was not performed.</p><p>In derived classes you should not overload this method, instead, you should overload  the protected interface:</p><p><ul><li><em><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareStore">_PrepareStore</a>()</em>: This method can be used to
        initialise or check both the container and the identifier.</li><li><em><a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">_StoreObject</a>()</em>: This method will perform the
        actual commit.</li></ul></p></p>
	<ul class="tags">
				<li><span class="field">throws:</span> CException</li>
				<li><span class="field">access:</span> public</li>
				<li><span class="field">uses:</span> <a href="../../Framework/Core/CStatusObject.html#method_IsDirty">CStatusObject::_IsDirty()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">CPersistentObject::_StoreObject()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">CPersistentObject::_IsCommitted()</a></li>
				<li><span class="field">uses:</span> _CheckContainer()</li>
				<li><span class="field">uses:</span> _CheckIdentifier()</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			Commit
		</span>
					([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span> = <span class="var-default">NULL</span>], [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span> = <span class="var-default">NULL</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theContainer</span><span class="var-description">: Persistent container.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodUncommit" id="Uncommit"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">Uncommit</span> (line <span class="line-number">316</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Reset _IsCommitted() status.</p>
<p class="description"><p>This method can be used to reset the object's <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">committed</a>  <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">status</a>, this may be necessary when copying an object from one  container to the other, since the object will be <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">committed</a> only if  the <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">committed</a> <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">status</a> is not set,  or if the <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_DIRTY">dirsty</a> <a href="../../Framework/Core/CStatusObject.html#method_IsDirty">status</a> is set.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			Uncommit
		</span>
				()
			</div>
	
		
			
	</div>
<a name="method_CreateObject" id="_CreateObject"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_CreateObject</span> (line <span class="line-number">411</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Create object.</p>
<p class="description"><p>The duty of this method is to instantiate an object with the provided data.</p><p>This class expects the content to be either <em>NULL</em>, meaning we are instantiating  an empty object, an <em>array</em> or an <em>ArrayObject</em>, in which case we are  instantiating an object from the provided data; other types should either be handled  by derived classes or raise an <a href="../../Framework/Definitions/_defines---Errors.inc.php.html#definekERROR_INVALID_PARAMETER">exception</a>.</p><p>The method returns a boolean where <em>TRUE</em> indicates that the object was  instantiated with data, and <em>FALSE</em> indicating that the object is empty. This  will be used to set the object <a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">committed</a>  <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">flag</a>.</p><p>The parameter is provided as a reference.</p></p>
	<ul class="tags">
				<li><span class="field">see:</span> <a href="../../Framework/Definitions/_defines---Errors.inc.php.html#definekERROR_UNSUPPORTED">kERROR_UNSUPPORTED</a></li>
				<li><span class="field">throws:</span> CException</li>
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method__construct">CPersistentObject::__construct()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			_CreateObject
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContent</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContent</span><span class="var-description">: Object data content.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_FindObject" id="_FindObject"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_FindObject</span> (line <span class="line-number">540</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Find object.</p>
<p class="description"><p>The duty of this method is to locate the object identified by <em>$theIdentifier</em>  in the container <em>$theContainer</em> and return its contents or <em>NULL</em> if not  found.</p><p>The method should expect both parameters to have been previously checked: in this  class, the container must be an <em>ArrayObject</em> representing either the actual  container, or a <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instance which will take care  of locating the object within its managed native container.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method__construct">CPersistentObject::__construct()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			_FindObject
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_FinishStore" id="_FinishStore"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_FinishStore</span> (line <span class="line-number">696</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Normalise after a store.</p>
<p class="description"><p>This method will be called after the <a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">store</a> operation, its  duty is to restore the object and the parameters to the state they were before the  <a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">commit</a> operation.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_FinishStore
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_IsCommitted" id="_IsCommitted"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_IsCommitted</span> (line <span class="line-number">363</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Manage committed status.</p>
<p class="description"><p>This method can be used to get or set the object's committed state.</p><p>A committed object is one that has either been loaded from a container or committed  to a container. This state indicates that the object is persistent. This state,  combined with the <a href="../../Framework/Core/CStatusObject.html#method_IsDirty">dirty</a> status, can determine if an object needs  to be committed in a container or not.</p><p>The method features a single parameter:</p><p><ul><li><em>NULL</em>: The method will return <em>TRUE</em> if the object is committed, or
        <em>FALSE</em> if the object is not committed.</li><li><em>TRUE</em>: The method will set the object to committed.</li><li><em>FALSE</em>: The method will reset the object's committed state.</li></ul></p><p>In all cases the method will return the state <em>after</em> it was eventually  modified.</p></p>
	<ul class="tags">
				<li><span class="field">see:</span> <a href="../../Framework/Definitions/_defines---Flags.inc.php.html#definekFLAG_STATE_COMMITTED">kFLAG_STATE_COMMITTED</a></li>
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">usedby:</span> <a href="../../Objects/Entities/CUser.html#methodoffsetUnset">CUser::offsetUnset()</a></li>
				<li><span class="field">usedby:</span> <a href="../../Objects/Entities/CUser.html#methodoffsetSet">CUser::offsetSet()</a></li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method__construct">CPersistentObject::__construct()</a></li>
				<li><span class="field">uses:</span> <a href="../../Framework/Core/CStatusObject.html#method_ManageBitField">CStatusObject::_ManageBitField()</a></li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">CPersistentObject::Commit()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			_IsCommitted
		</span>
					([<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theState</span> = <span class="var-default">NULL</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theState</span><span class="var-description">: TRUE, FALSE or NULL.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_PrepareFind" id="_PrepareFind"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_PrepareFind</span> (line <span class="line-number">597</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Normalise parameters of a find.</p>
<p class="description"><p>The duty of this method is to ensure that the parameters provided to a  <a href="../../Framework/Persistence/CPersistentObject.html#method_FindObject">find</a> operation are valid.</p><p>The method should first check if the provided container is of the correct type, then  it should ensure that the identifier is valid.</p><p>We know that the identifier cannot be missing, since this method is only called if  the identifier was provided. We should check that the provided container is of the  correct type. In derived classes you should first handle your custom types, then  let the parent method handle other types.</p><p>Any errors should raise an exception.</p><p>In this class we only support <em>ArrayObject</em> containers and the identifier is not  expected to be <em>NULL</em>.</p></p>
	<ul class="tags">
				<li><span class="field">see:</span> kERROR_OPTION_MISSING kERROR_UNSUPPORTED</li>
				<li><span class="field">throws:</span> CException</li>
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#method__construct">CPersistentObject::__construct()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_PrepareFind
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Framework/Persistence/CPersistentUnitObject.html#method_PrepareFind">CPersistentUnitObject::_PrepareFind()</a>
								: Normalise parameters of a find.
							</li>
				</ul>
	</div>
<a name="method_PrepareStore" id="_PrepareStore"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_PrepareStore</span> (line <span class="line-number">649</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Normalise before a store.</p>
<p class="description"><p>This method will be called before the <a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">store</a> operation, its  duty is to prepare the object and the parameters for the  <a href="../../Framework/Persistence/CPersistentObject.html#method_StoreObject">commit</a>.</p><p>In this class we ensure that the container is either an ArrayObject or a  <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instance, any other type will raise an  exception. In derived classes you should handle your custom containers or delegate to  the parent.</p><p>In this class we do not check the identifier.</p><p>Any errors should raise an exception.</p></p>
	<ul class="tags">
				<li><span class="field">see:</span> kERROR_INVALID_PARAMETER kERROR_OPTION_MISSING kERROR_UNSUPPORTED</li>
				<li><span class="field">throws:</span> CException</li>
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">uses:</span> <a href="../../Framework/Core/CStatusObject.html#method_IsInited">CStatusObject::_IsInited()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_PrepareStore
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Framework/Persistence/CPersistentUnitObject.html#method_PrepareStore">CPersistentUnitObject::_PrepareStore()</a>
								: Normalise before a store.
							</li>
					<li>
				<a href="../../Objects/Entities/CEntity.html#method_PrepareStore">CEntity::_PrepareStore()</a>
								: Normalise before a store.
							</li>
					<li>
				<a href="../../Objects/Entities/CUser.html#method_PrepareStore">CUser::_PrepareStore()</a>
								: Normalise parameters of a store.
							</li>
				</ul>
	</div>
<a name="method_StoreObject" id="_StoreObject"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_StoreObject</span> (line <span class="line-number">476</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Store object in container.</p>
<p class="description"><p>The duty of this method is to store the current object in the provided container with  a key provided by the identifier.</p><p>This class can store objects in ArrayObject containers and in  <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instances, in the latter case the storing will  be delegated to the container.</p><p>The method should expect both parameters to have been previously  <a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareStore">checked</a>, its main duty is to perform the actual storage.  In derived classes you should intercept custom containers, or call the parent method.</p><p><em>Note: the duty of this method is to store only the array part of the object,
 properties should be ignored.</em></p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
				<li><span class="field">usedby:</span> <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">CPersistentObject::Commit()</a></li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			_StoreObject
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
	</div>
							<h4>Inherited Methods</h4>
				<a name='inherited_methods'><!-- --></a>	
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../../Framework/Core/CStatusObject.html">CStatusObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#methodoffsetSet">CStatusObject::offsetSet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#methodoffsetUnset">CStatusObject::offsetUnset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_IsDirty">CStatusObject::_IsDirty()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_IsInited">CStatusObject::_IsInited()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_ManageBitField">CStatusObject::_ManageBitField()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_Status">CStatusObject::_Status()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../../Framework/Core/CArrayObject.html">CArrayObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodkeys">CArrayObject::keys()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetGet">CArrayObject::offsetGet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetSet">CArrayObject::offsetSet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetUnset">CArrayObject::offsetUnset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodvalues">CArrayObject::values()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageArrayOffset">CArrayObject::_ManageArrayOffset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageOffset">CArrayObject::_ManageOffset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageTypedArrayOffset">CArrayObject::_ManageTypedArrayOffset()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname">ArrayObject (Internal Class)</span></p>
					<blockquote>
													<img src="../../media/images/Constructor.png" alt=" "/>
							<span class="method-name">constructor __construct ( $array )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">append ( $value )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">asort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">count (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">exchangeArray ( $array )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getArrayCopy (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getFlags (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getIterator (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getIteratorClass (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">ksort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">natcasesort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">natsort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetExists ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetGet ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetSet ( $index, $newval )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetUnset ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">serialize (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">setFlags ( $flags )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">setIteratorClass ( $iteratorClass )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">uasort ( $cmp_function )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">uksort ( $cmp_function )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">unserialize ( $serialized )</span><br>
											</blockquote>
										
		</div>
	</div>

	<a name="sec-consts"></a>
	<div class="info-box">
		<div class="info-box-title">Class Constants</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendants</a> |
										<a href="#sec-var-summary">Constants</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-vars">Vars</a>
														| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
										<h4>Inherited Constants</h4>
				<A NAME='inherited_consts'><!-- --></A>
									<p>Inherited from <span class="classname">ArrayObject (Internal Class)</span></p>
					<blockquote>
													<img src="../../media/images/Variable.png" />
							<span class="const-title">
								<span class="const-name">ARRAY_AS_PROPS = 2</span><br>
							</span>
													<img src="../../media/images/Variable.png" />
							<span class="const-title">
								<span class="const-name">STD_PROP_LIST = 1</span><br>
							</span>
											</blockquote> 
										
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Mon, 19 Mar 2012 19:37:30 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>