<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class CPersistentUnitObject</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> CPersistentUnitObject</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
							<a href="#sec-descendents">Descendents</a>
			|											<a href="#sec-vars">Vars</a>
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
											<a href="#sec-consts">Constants</a>
						
			</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Unit objects ancestor.</p>
<p class="description"><p>A unit object is one that has a unique identifier, that is, it can be uniquely identified  among a collection of other objects.</p><p>Instances derived from this class have a series of additional properties and methods that  govern how these can be stored and retrieved from containers.</p><p>The class features two read-only public methods that return:</p><p><ul><li><em><a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id()</a></em>: The object unique identifier as used by the native
        persistent container to uniquely identify the object.</li><li><em><a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index()</a></em>: The full index that uniquely identifies the
        object.</li></ul></p><p>Although both methods seem to return the same information, they are different, in the  sense that the <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index</a> method should return the property or properties  that constitute the object's unique identifier concatenated in a single string, this may  be too long to use as an index, whereas <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id()</a> returns the actual value used  as the key, which may be the hashed <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index</a> value. In other words  <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index</a> is the human readable version of <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id</a>.</p><p>When the object is <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">committed</a> for the first time, the value of the  <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id</a> method will be set in the <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">kTAG_ID_NATIVE</a> offset  which represents the object ID. This offset should never be changed and represents the  persistent identifier of the object.</p><p>Objects derived from this class also hold, by default, their class name in an  <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_CLASS">offset</a>, this is used to <a href="../../Framework/Persistence/CPersistentUnitObject.html#methodNewObject">instantiate</a> objects of the  correct class when retrieving data from a container.</p><p>This class also features a <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_VERSION">version</a> which is an integer, incremented  each time the object is <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">committed</a>: this is  useful to implement a  concurrency control mechanism.</p><p>Starting from this class we only handle <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instances  as containers, other container types will not be supported. This is because  <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instances have an  <a href="../../Framework/Core/CDataType.html#methodSerialiseObject">serialise</a> and  CMongoDataWrapper::UnserialiseObject() interface for handling special  data types.</p><p>The specifics of this are managed by the <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived classes,  so when planning your objects think in advance in what containers you plan to store them.</p></p>
		<p class="notes">
			Located in <a class="field" href="_classes---CPersistentUnitObject.php.html">/classes/CPersistentUnitObject.php</a> (line <span class="field">82</span>)
		</p>
		
				
		<pre>ArrayObject
   |
   --<a href="../../Framework/Core/CArrayObject.html">CArrayObject</a>
      |
      --<a href="../../Framework/Core/CStatusObject.html">CStatusObject</a>
         |
         --<a href="../../Framework/Persistence/CPersistentObject.html">CPersistentObject</a>
            |
            --CPersistentUnitObject</pre>
	
			</div>
</div>

	<a name="sec-descendents"></a>
	<div class="info-box">
		<div class="info-box-title">Direct descendents</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
			<span class="disabled">Descendents</span>
			|												<a href="#sec-vars">Vars</a>
								|															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
															<a href="#sec-consts">Constants</a>
							
					</div>
		<div class="info-box-body">
			<table cellpadding="2" cellspacing="0" class="class-table">
				<tr>
					<th class="class-table-header">Class</th>
					<th class="class-table-header">Description</th>
				</tr>
								<tr>
					<td style="padding-right: 2em; white-space: nowrap">
						<img src="../../media/images/Class.png"
								 alt=" class"
								 title=" class"
								 style="vertical-align: center"/>
						<a href="../../Objects/Data/CDataset.html">CDataset</a>
					</td>
					<td>
											Dataset ancestor.
										</td>
				</tr>
								<tr>
					<td style="padding-right: 2em; white-space: nowrap">
						<img src="../../media/images/Class.png"
								 alt=" class"
								 title=" class"
								 style="vertical-align: center"/>
						<a href="../../Objects/Entities/CEntity.html">CEntity</a>
					</td>
					<td>
											Entity.
										</td>
				</tr>
							</table>
		</div>
	</div>



	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendants</a> |
															<a href="#sec-consts">Constants</a>
							
															<a href="#sec-vars">Vars</a>
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
												<div class="method-definition">
					<img src="../../media/images/StaticMethod.png" alt=" "/>
											static <span class="method-result">mixed</span>
										<a href="#NewObject" title="details" class="method-name">NewObject</a>
											(<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span>)
									</div>
																																																																																				<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#_id" title="details" class="method-name">_id</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">string</span>
										<a href="#_index" title="details" class="method-name">_index</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#_ManageObjectList" title="details" class="method-name">_ManageObjectList</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$theOffset</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$theValue</span>, [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theOperation</span> = <span class="var-default">NULL</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$getOld</span> = <span class="var-default">FALSE</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">string|NULL</span>
										<a href="#_ObjectIndex" title="details" class="method-name">_ObjectIndex</a>
											(<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theValue</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_PrepareFind" title="details" class="method-name">_PrepareFind</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_PrepareReferenceList" title="details" class="method-name">_PrepareReferenceList</a>
											(<span class="var-type"><a href="../../Framework/Persistence/CContainer.html">CContainer</a></span>&nbsp;<span class="var-name">$theContainer</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$theOffset</span>, [<span class="var-type">bitfield</span>&nbsp;<span class="var-name">$theModifiers</span> = <span class="var-default">kFLAG_REFERENCE_IDENTIFIER</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#_PrepareStore" title="details" class="method-name">_PrepareStore</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-consts">Constants</a>
							
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
							<h4>Inherited Variables</h4>
				<A NAME='inherited_vars'><!-- --></A>
									<p>Inherited from <span class="classname"><a href="../../Framework/Core/CStatusObject.html">CStatusObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Variable.png" />
							<span class="var-title">
								<span class="var-name"><a href="../../Framework/Core/CStatusObject.html#var$mStatus">CStatusObject::$mStatus</a></span><br>
							</span>
											</blockquote> 
										
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendents</a> |
															<a href="#sec-vars">Vars</a>
														<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodNewObject" id="NewObject"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/StaticMethod.png" />
		<span class="method-title">static NewObject</span> (line <span class="line-number">120</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Instantiate object.</p>
<p class="description"><p>This method can be used to instantiate an object from a mixed class data store, it  expects the container to be a <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instance and the  identifier to be the <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">unique</a> <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">identifier</a> of the  object.</p><p>This method takes advantage of the <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">stored</a> <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_CLASS">class</a>  name.</p><p>The method will return an object, if the identifier matches and the object has its  <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_CLASS">class</a> name; an array if the identifier matches, but the data  doesn't contain a @link kTAG_CLASS class} name reference; <em>NULL</em> if the  identifier didn't match.</p></p>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			NewObject
		</span>
					(<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theContainer</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theContainer</span><span class="var-description">: Persistent container.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_id" id="_id"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_id</span> (line <span class="line-number">209</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return the object's unique identifier.</p>
<p class="description"><p>This method can be used to return a value that represents the object's unique  native identifier. The method should use the value returned by the  <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index</a> method and hash it if necessary.</p><p>This method will be called <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_PrepareStore">before</a> <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">committing</a>  the object to fill its unique identifier <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">offset</a>.</p><p>If this method returns <em>NULL</em>, it is assumed that it will be the  <a href="../../Framework/Persistence/CContainer.html">container</a> that will provide a default unique value.</p><p>In this class we return the value of <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_index">_index</a> by default.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			_id
		</span>
				()
			</div>
	
		
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Objects/Entities/CUser.html#method_id">CUser::_id()</a>
								: Return the object's unique identifier.
							</li>
				</ul>
	</div>
<a name="method_index" id="_index"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_index</span> (line <span class="line-number">231</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return the object's unique index.</p>
<p class="description"><p>This method can be used to return a string value that represents the object's unique  identifier. This value should generally be extracted from the object's properties.</p><p>In general this value will be used by the <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id</a> method to form the  object's unique <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">identifier</a>, maybe hashed to make the index  smaller.</p><p>In this class we return by default <em>NULL</em>.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			_index
		</span>
				()
			</div>
	
		
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Objects/Entities/CEntity.html#method_index">CEntity::_index()</a>
								: Return the object's unique index.
							</li>
					<li>
				<a href="../../Objects/Entities/CUser.html#method_index">CUser::_index()</a>
								: Return the object's unique index.
							</li>
				</ul>
	</div>
<a name="method_ManageObjectList" id="_ManageObjectList"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_ManageObjectList</span> (line <span class="line-number">582</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Manage a list of object references.</p>
<p class="description"><p>This method can be used to manage a list of object references, in which each element  is either:</p><p><ul><li><em>Scalar</em>: A scalar or object representing:
	 <ul><li><em>The object</em>: The actual referenced object.</li><li><em>The object reference</em>: An object reference structure or a scalar
			representing the object <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">identifier</a>.</li></ul>
        or:</li><li><em>Array</em>: A structure composed of two items:
     <ul><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_TYPE">kTAG_TYPE</a></em>: This offset represents the type or
            class of the reference.</li><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_DATA">kTAG_DATA</a></em>: This offset represents the actual object
            or object reference.</li></ul></li></ul></p><p>The reference list is numerically indexed array and this method will ensure it  remains so.</p><p>The method accepts the following parameters:</p><p><ul><li><strong>$theOffset</strong>: This parameter represents the offset in the current object
        that holds the list of references. This value may not be empty.</li><li><strong>$theValue</strong>: This parameter represents either the search key in the list
        when retrieving or deleting, or the reference when replacing or adding. If you
        provide an array, it means that the elements may have a
        <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_TYPE">kTAG_TYPE</a> offset and that the reference or object must be
        found in the <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_DATA">kTAG_DATA</a> offset. When matching, if the
        <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_TYPE">kTAG_TYPE</a> offset is not provided, it means that only those
        elements that do not have a <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_TYPE">kTAG_TYPE</a> offset will be selected
        for matching. If the types match, the method will use the
        <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_ObjectIndex">_ObjectIndex</a> method to match the references, please refer
        to its documentation for more information. If the provided value is not an
        array, it means that the reference list does not feature types, so matches will
        only be performed on the reference.</li><li><strong>$theOperation</strong>: The operation to perform:
     <ul><li><em>NULL</em>: Return the element matched by the previous parameter.</li><li><em>FALSE</em>: Delete the element matched by the previous parameter and
            return it.</li><li><em>other</em>: Any other value means that we want to add to the list the
            element provided in the previous parameter, either appending it if there
            was no matching element, or by replacing a matching element. The method will
            return either the replaced element or the new one.</li></ul></li><li><strong>$getOld</strong>: Determines what the method will return when deleting or
        replacing:
     <ul><li><em>TRUE</em>: Return the deleted or replaced element.</li><li><em>FALSE</em>: Return the replacing element or <em>NULL</em> when deleting.</li></ul></li></ul></p><p>The <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_ObjectIndex">method</a> used to match the list elements expects  <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">identifiers</a> in the references or objects, if these are not  there, there is no way to discern duplicates.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			_ManageObjectList
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$theOffset</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$theValue</span>, [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theOperation</span> = <span class="var-default">NULL</span>], [<span class="var-type">boolean</span>&nbsp;<span class="var-name">$getOld</span> = <span class="var-default">FALSE</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$theOffset</span><span class="var-description">: Offset.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theValue</span><span class="var-description">: Reference or instance.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theOperation</span><span class="var-description">: Operation.</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$getOld</span><span class="var-description">: TRUE get old value.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_ObjectIndex" id="_ObjectIndex"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_ObjectIndex</span> (line <span class="line-number">1060</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return object index.</p>
<p class="description"><p>This method is a utility that can be used to extract an identifier from a value, it  is used when adding objects or object references to a list that is not organised by  object <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">ID</a>.</p><p>This method will attempt ti infer the object identifier by performing the following  steps:</p><p><ul><li><em>Array</em> or <em>ArrayObject</em>: In this case we interpret the parameter to
        be either an instance of the object itself, or a reference to the object, we
        check in order if any of the following can be found:
     <ul><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">kTAG_ID_NATIVE</a></em>: We first check whether the
            object has that offset and use it is so.</li><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_REFERENCE">kTAG_ID_REFERENCE</a></em>: We then check whether
            the structure contains a reference identifier.</li><li><em><a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id</a></em>: If the parameter is an object derived from this
            class, we try to call this method and use its result.</li></ul></li><li><em>other</em>: If all of the above fails we simply return the provided value.</li></ul></p><p>Note that the method assumes that the returned value must be convertable to a string,  if that is not the case you may get into trouble.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string|NULL</span>
		<span class="method-name">
			_ObjectIndex
		</span>
					(<span class="var-type">mixed</span>&nbsp;<span class="var-name">$theValue</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$theValue</span><span class="var-description">: Object or identifier.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_PrepareFind" id="_PrepareFind"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_PrepareFind</span> (line <span class="line-number">265</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Normalise parameters of a find.</p>
<p class="description"><p>The duty of this method is to ensure that the parameters provided to a  <a href="../../Framework/Persistence/CPersistentObject.html#method_Load">find</a> operation are valid.</p><p>In this class we ensure that the container is derived from  <a href="../../Framework/Persistence/CContainer.html">CContainer</a>.</p></p>
	<ul class="tags">
				<li><span class="field">see:</span> kERROR_OPTION_MISSING kERROR_UNSUPPORTED</li>
				<li><span class="field">throws:</span> <a href="../../Framework/Core/CException.html">CException</a></li>
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_PrepareFind
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			<hr class="separator" />
		<div class="notes">Redefinition of:</div>
		<dl>
			<dt><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareFind">CPersistentObject::_PrepareFind()</a></dt>
						<dd>Normalise parameters of a find.</dd>
					</dl>
			
	</div>
<a name="method_PrepareReferenceList" id="_PrepareReferenceList"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_PrepareReferenceList</span> (line <span class="line-number">400</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Prepare references lists.</p>
<p class="description"><p>This method will usually be called <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_PrepareStore">before</a>  <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">storing</a> the object: its duty is to <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">commit</a> and  <a href="../../Framework/Persistence/CContainer.html#methodReference">convert</a> to reference all referenced objects that are  in the form of instances.</p><p>The method will iterate all elements of the provided reference list, intercept all  instances derived from this class and convert these to object references.</p><p>The parameters to this method are:</p><p><ul><li><strong>$theContainer</strong>: The container that is about to receive the current object,
        it must also be the container in which to find the references and must be
        derived from <a href="../../Framework/Persistence/CContainer.html">CContainer</a>.</li><li><strong>$theOffset</strong>: The current object's offset in which the reference list is
        stored.</li><li><strong>$theModifiers</strong>: A bitfield indicating which elements of the
        <a href="../../Framework/Persistence/CContainer.html#methodReference">reference</a> should be included.</li></ul></p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_PrepareReferenceList
		</span>
					(<span class="var-type"><a href="../../Framework/Persistence/CContainer.html">CContainer</a></span>&nbsp;<span class="var-name">$theContainer</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$theOffset</span>, [<span class="var-type">bitfield</span>&nbsp;<span class="var-name">$theModifiers</span> = <span class="var-default">kFLAG_REFERENCE_IDENTIFIER</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"><a href="../../Framework/Persistence/CContainer.html">CContainer</a></span>
				<span class="var-name">$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$theOffset</span><span class="var-description">: Reference list offset.</span>			</li>
					<li>
				<span class="var-type">bitfield</span>
				<span class="var-name">$theModifiers</span><span class="var-description">: Referencing options.</span>			</li>
				</ul>
		
			
	</div>
<a name="method_PrepareStore" id="_PrepareStore"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">_PrepareStore</span> (line <span class="line-number">326</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Normalise before a store.</p>
<p class="description"><p>The duty of this method is to ensure that the parameters provided to the  <a href="../../Framework/Persistence/CPersistentObject.html#method_Commit">store</a> operation are correct.</p><p>In this class we ensure that the container is a ArrayObject or a  <a href="../../Framework/Persistence/CContainer.html">CContainer</a> derived instance and we ensure the identifier is filled  in the case it was not provided:</p><p><ul><li><em>Get <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">kTAG_ID_NATIVE</a></em>: If the object features the
        <a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_ID_NATIVE">kTAG_ID_NATIVE</a> offset, it will be preferred. This is
        necessary, because we don't want the object identifier to change in time.</li><li><em>Use the <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">:id</a> method</em>: We use the value returned by the
        <a href="../../Framework/Persistence/CPersistentUnitObject.html#method_id">_id</a> protected method, this will be the case when
        <a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">saving</a> new objects.</li></ul></p><p>We also handle here the other two default offsets:</p><p><ul><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_CLASS">kTAG_CLASS</a></em>: We set this offset with the current
        object's name. Note that we overwrite old values.</li><li><em><a href="../../Framework/Definitions/_defines---Offsets.inc.php.html#definekTAG_VERSION">kTAG_VERSION</a></em>: If not set, we initialise this value
        to zero, if already set, we increment it.</li></ul></p></p>
	<ul class="tags">
				<li><span class="field">see:</span> kERROR_OPTION_MISSING kERROR_UNSUPPORTED</li>
				<li><span class="field">throws:</span> <a href="../../Framework/Core/CException.html">CException</a></li>
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			_PrepareStore
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$theContainer</span>, <span class="var-type">reference</span>&nbsp;<span class="var-name">&$theIdentifier</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theContainer</span><span class="var-description">: Object container.</span>			</li>
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$theIdentifier</span><span class="var-description">: Object identifier.</span>			</li>
				</ul>
		
			<hr class="separator" />
		<div class="notes">Redefinition of:</div>
		<dl>
			<dt><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareStore">CPersistentObject::_PrepareStore()</a></dt>
						<dd>Normalise before a store.</dd>
					</dl>
			
			<hr class="separator" />
		<div class="notes">Redefined in descendants as:</div>
		<ul class="redefinitions">
					<li>
				<a href="../../Objects/Entities/CEntity.html#method_PrepareStore">CEntity::_PrepareStore()</a>
								: Normalise before a store.
							</li>
					<li>
				<a href="../../Objects/Entities/CUser.html#method_PrepareStore">CUser::_PrepareStore()</a>
								: Normalise parameters of a store.
							</li>
				</ul>
	</div>
							<h4>Inherited Methods</h4>
				<a name='inherited_methods'><!-- --></a>	
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../../Framework/Persistence/CPersistentObject.html">CPersistentObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Constructor.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method__construct">CPersistentObject::__construct()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#methodCommit">CPersistentObject::Commit()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#methodUncommit">CPersistentObject::Uncommit()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_Commit">CPersistentObject::_Commit()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_Create">CPersistentObject::_Create()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_FinishFind">CPersistentObject::_FinishFind()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_FinishStore">CPersistentObject::_FinishStore()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_IsCommitted">CPersistentObject::_IsCommitted()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_Load">CPersistentObject::_Load()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareFind">CPersistentObject::_PrepareFind()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Persistence/CPersistentObject.html#method_PrepareStore">CPersistentObject::_PrepareStore()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../../Framework/Core/CStatusObject.html">CStatusObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#methodoffsetSet">CStatusObject::offsetSet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#methodoffsetUnset">CStatusObject::offsetUnset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_IsDirty">CStatusObject::_IsDirty()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_IsInited">CStatusObject::_IsInited()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_ManageBitField">CStatusObject::_ManageBitField()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CStatusObject.html#method_Status">CStatusObject::_Status()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../../Framework/Core/CArrayObject.html">CArrayObject</a></span></p>
					<blockquote>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodkeys">CArrayObject::keys()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetGet">CArrayObject::offsetGet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetSet">CArrayObject::offsetSet()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodoffsetUnset">CArrayObject::offsetUnset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#methodvalues">CArrayObject::values()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageArrayOffset">CArrayObject::_ManageArrayOffset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageOffset">CArrayObject::_ManageOffset()</a></span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name"><a href="../../Framework/Core/CArrayObject.html#method_ManageTypedArrayOffset">CArrayObject::_ManageTypedArrayOffset()</a></span><br>
											</blockquote>
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname">ArrayObject (Internal Class)</span></p>
					<blockquote>
													<img src="../../media/images/Constructor.png" alt=" "/>
							<span class="method-name">constructor __construct ( $array )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">append ( $value )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">asort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">count (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">exchangeArray ( $array )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getArrayCopy (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getFlags (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getIterator (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">getIteratorClass (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">ksort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">natcasesort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">natsort (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetExists ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetGet ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetSet ( $index, $newval )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">offsetUnset ( $index )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">serialize (  )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">setFlags ( $flags )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">setIteratorClass ( $iteratorClass )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">uasort ( $cmp_function )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">uksort ( $cmp_function )</span><br>
													<img src="../../media/images/Method.png" alt=" "/>
							<span class="method-name">unserialize ( $serialized )</span><br>
											</blockquote>
										
		</div>
	</div>

	<a name="sec-consts"></a>
	<div class="info-box">
		<div class="info-box-title">Class Constants</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
							<a href="#sec-descendents">Descendants</a> |
										<a href="#sec-var-summary">Constants</a> (<span class="disabled">details</span>)
						
			
												<a href="#sec-vars">Vars</a>
														| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
										<h4>Inherited Constants</h4>
				<A NAME='inherited_consts'><!-- --></A>
									<p>Inherited from <span class="classname">ArrayObject (Internal Class)</span></p>
					<blockquote>
													<img src="../../media/images/Variable.png" />
							<span class="const-title">
								<span class="const-name">ARRAY_AS_PROPS = 2</span><br>
							</span>
													<img src="../../media/images/Variable.png" />
							<span class="const-title">
								<span class="const-name">STD_PROP_LIST = 1</span><br>
							</span>
											</blockquote> 
										
		</div>
	</div>
	
	<p class="notes" id="credit">
		Documentation generated on Thu, 22 Mar 2012 19:26:19 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>